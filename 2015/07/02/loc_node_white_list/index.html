
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>loc_node white list implementation | 威斯星星de小窝</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="阮先生">
    

    
    <meta name="description" content="TODO:
end-to-end dbapi testing

Objective:Create a white list filter for specfic MAC address to allow localization data to pass to loc instance from loc_node.look at code in loc_node to see poetential">
<meta property="og:type" content="article">
<meta property="og:title" content="loc_node white list implementation">
<meta property="og:url" content="http://www.xuyiruan.com/2015/07/02/loc_node_white_list/index.html">
<meta property="og:site_name" content="威斯星星de小窝">
<meta property="og:description" content="TODO:
end-to-end dbapi testing

Objective:Create a white list filter for specfic MAC address to allow localization data to pass to loc instance from loc_node.look at code in loc_node to see poetential">
<meta property="og:image" content="http://7xihzu.com1.z0.glb.clouddn.com/work.loc_white_list.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="loc_node white list implementation">
<meta name="twitter:description" content="TODO:
end-to-end dbapi testing

Objective:Create a white list filter for specfic MAC address to allow localization data to pass to loc instance from loc_node.look at code in loc_node to see poetential">


    
    <link rel="alternative" href="/atom.xml" title="威斯星星de小窝" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/logo.png">
    
    
    <link rel="apple-touch-icon" href="/img/sushi.png">
    <link rel="apple-touch-icon-precomposed" href="/img/sushi.png">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/sushi.png" alt="威斯星星de小窝" title="威斯星星de小窝"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="威斯星星de小窝">威斯星星de小窝</a></h1>
				<h2 class="blog-motto">多睡觉 多读书 多思考</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/tags">Tags</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.xuyiruan.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/02/loc_node_white_list/" title="loc_node white list implementation" itemprop="url">loc_node white list implementation</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-07-02T06:35:52.000Z" itemprop="datePublished"> 發表於 07-02-2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目錄</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TODO:"><span class="toc-number">1.</span> <span class="toc-text">TODO:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Objective:"><span class="toc-number">2.</span> <span class="toc-text">Objective:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Files_to_read/modify:"><span class="toc-number">3.</span> <span class="toc-text">Files to read/modify:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Study_Notes:"><span class="toc-number">4.</span> <span class="toc-text">Study Notes:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Questions:"><span class="toc-number">5.</span> <span class="toc-text">Questions:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Testing:"><span class="toc-number">6.</span> <span class="toc-text">Testing:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Useful_Functions:"><span class="toc-number">7.</span> <span class="toc-text">Useful Functions:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#zip()"><span class="toc-number">7.1.</span> <span class="toc-text">zip()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep"><span class="toc-number">7.2.</span> <span class="toc-text">grep</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Potential_Solution"><span class="toc-number">8.</span> <span class="toc-text">Potential Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Errors_encoutered:"><span class="toc-number">9.</span> <span class="toc-text">Errors encoutered:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Solutions:"><span class="toc-number">9.1.</span> <span class="toc-text">Solutions:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Schedule:"><span class="toc-number">10.</span> <span class="toc-text">Schedule:</span></a></li></ol>
		
		</div>
		
		<p><img src="http://7xihzu.com1.z0.glb.clouddn.com/work.loc_white_list.jpg" alt="Localization Project" style="width:600px;"></p>
<h2 id="TODO:">TODO:</h2><ol>
<li>end-to-end dbapi testing</li>
</ol>
<h2 id="Objective:">Objective:</h2><p>Create a white list filter for specfic MAC address to allow localization data to pass to <code>loc</code> instance from <code>loc_node</code>.<br>look at code in <code>loc_node</code> to see poetential place to add white list filtering in.</p>
<h2 id="Files_to_read/modify:">Files to read/modify:</h2><ol>
<li><code>/home/xuyi/paradrop/trunk/scripts/recon_locmgmt.py</code></li>
<li><code>/home/xuyi/paradrop/trunk/scripts/recon_loc.conf</code> - configuration file to create specific <code>loc</code> instances follow by <code>loc_node</code></li>
<li><code>/home/xuyi/paradrop/trunk/backend/loc/loc_node.py</code> - receive raw data (RSSI data) forward by <code>dbapi</code> and filter the  raw data by last digit of the associated MAC address. ex. (0-7) goes to <code>loc1</code> and (8-F) goes to <code>loc2</code>. We need to add new function to filter specific MAC by creating a white list.  </li>
<li><code>/home/xuyi/paradrop/trunk/backend/loc/loc.py</code> - the sever that process and compute the raw data from <code>loc_node</code> then sent computed data back to <code>dbapi_server</code> and store there.</li>
</ol>
<a id="more"></a>
<h2 id="Study_Notes:">Study Notes:</h2><p>1.in side the <code>loc_node.py</code> file, function <code>generateMacMap</code> generates a dictionary <code>macMap</code> that map <code>last char of MAC</code> to <code>loc id number</code></p>
<p>2.<code>macMap</code> takes <code>char</code> and returns <code>loc id number</code></p>
<p>3.<code>locData</code> is a dictionary where key(might be <code>number</code>) -&gt; value (might be <code>data</code>)</p>
<p>4.<code>locMap</code> should be a dictonary of mapping from <code>loc number</code>: <code>data</code></p>
<p><code>locMap</code> -&gt; {0:[data1, data2, data3…], 1:[data1, data2, data3..], 2:[d1, d2..] …}</p>
<p>5.<code>determineLoc(macMap, d)</code> returns  <code>macMap[d[2][-1]]</code> which is a <code>loc id numnber</code>, </p>
<p>6.Get MAC address: <code>d[2]</code></p>
<p>7.Get the last char of MAC address: <code>d[2][-1]</code></p>
<p>8.Use the last char of MAC to get its <code>loc id num</code>: <code>macMap[d[2][-1]]</code></p>
<p>9.<code>defer_parseData</code> function inside <code>loc_node.py</code> is the method send <code>data</code> to specific <code>loc module</code>, have a white list filter MAC address here will be reasonable.</p>
<p>10.<code>myLocData</code> = <code>locData</code>, <code>locData</code> stores the information of the current <code>loc</code> inlclude the number of loc modules is running. </p>
<p>11.<code>genearteMacMap</code>‘s primary function is to divide 0-F 16 possibles of last char of the MAC address into number of group to do computation. That number determine by current number of running <code>loc module</code>(determine by <code>myLocData</code>)</p>
<p>cat scripts/recon_loc.conf<br>python scripts/recon_locmgmt.py -g “State Street” —check</p>
<p>svn status</p>
<p>svn ci -m “DFW: added password support to SSID startup”</p>
<h2 id="Questions:">Questions:</h2><ol>
<li><p>Can I run command under xuyi@paradrop.wings? will that mess with the current system  - yes, run with diffrent port to not mess with the current PROD system.</p>
</li>
<li><p>what is the command to create <code>loc</code> and <code>loc_node</code> with configuration file <code>recon_loc.cnf</code> ?</p>
</li>
<li><p><code>locData</code>?? format ??  - <code>locData</code> stroes infomation about the current running <code>loc</code> instance, <code>len(locData.keys())</code> return the number of currnt running loc instance. </p>
</li>
<li><p>does d[2] detach the MAC adress from the data?  yes</p>
</li>
<li>How will the MAC address be imported to the WHITELIST?? </li>
</ol>
<h2 id="Testing:">Testing:</h2><p>open multiple tabs for running <code>loc_server</code>, <code>loc_node</code>,<code>loc</code>  </p>
<p><a href="http://wirelessathome.wings.cs.wisc.edu/redmine/projects/paradrop/wiki/Recon_Localization" target="_blank" rel="external">detail wiki here</a></p>
<p><strong>0.Run dbapi:</strong>  </p>
<p>In some cases you might want to test the FULL end to end system which would include the dbapi, in this case you can run dbapi as follows:</p>
<p><code>python dbapi/dbapi_server.py -s DBAPI_RECON_SNIFF_DISABLE_DB:True -s LOC_SERVER_URL:http://localhost</code></p>
<p>If you deceide to run the test  on <strong>paradrop.wings</strong>, make sure you change the <code>LOC_SERVER_PORT</code> for <code>loc_sever</code>, <code>loc_node</code>, and <code>loc</code> first so that it will not interference with current <code>loc_node</code> for PROD (current PROD version of the loc_server runs on 10400). To change port for <code>local_server</code>, append command line: <code>-s LOC_SERVER_PORT:PORT_NUM</code></p>
<p><strong>1.Run <code>loc_server</code>:</strong>  </p>
<p>On local machine:</p>
<pre><code>python loc_server<span class="class">.py</span> -s LOC_SERVER_DISABLE_DB:True
</code></pre><p>On <code>paradrop.wings</code>: (change to port other than 10400)</p>
<pre><code>python loc_server.py <span class="operator">-s</span> LOC_SERVER_DISABLE_DB:True <span class="operator">-s</span> LOC_SERVER_PORT:<span class="number">11400</span>
</code></pre><p><strong>2.Run <code>loc_node</code>:</strong>  </p>
<p>On local machine:</p>
<pre><code>python loc_node.py -g <span class="string">"Test"</span> --id <span class="number">0</span> -s <span class="constant">LOC_SERVER_URL</span><span class="symbol">:http</span><span class="symbol">://localhost</span> -s <span class="constant">LOC_NODE_URL</span><span class="symbol">:http</span><span class="symbol">://localhost</span>
</code></pre><p>On <code>paradrop.wings</code>: </p>
<pre><code>python loc_node.py -g <span class="string">"Test"</span> --id <span class="number">0</span> -s <span class="constant">LOC_SERVER_URL</span><span class="symbol">:http</span><span class="symbol">://localhost</span> -s <span class="constant">LOC_NODE_URL</span><span class="symbol">:http</span><span class="symbol">://localhost</span> -s <span class="constant">LOC_SERVER_PORT</span><span class="symbol">:</span><span class="number">11400</span>
</code></pre><p><strong>3.Run two instanc of <code>loc</code>:</strong>  </p>
<p>On local machine:</p>
<p>Instance 0:<br>    python loc.py —id 0 -g “Test” —guarantee 8 -s LOC_SERVER_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a> -s LOC_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a></p>
<p>Instance 1:<br>    python loc.py —id 1 -g “Test” —guarantee 8 -s LOC_SERVER_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a> -s LOC_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a></p>
<p>OR</p>
<p>On <code>paradrop.wings</code>: </p>
<p>python loc.py —id 0 -g “Test” —guarantee 8 -s LOC_SERVER_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a> -s LOC_URL:<a href="http://localhost" target="_blank" rel="external">http://localhost</a> -s LOC_SERVER_PORT:11400</p>
<p><strong>The loc_test</strong>  </p>
<p>If testing <strong>directly with loc_node</strong> (ie. loc_test bypasses dbapi and sends the raw data directly to loc_node)</p>
<p><code>python loc_test.py -g &quot;Test&quot; -t 5 -ep 0.10 -np 0.10 -mp &quot;10-0.85-0.99-0.5&quot; -u &quot;http://localhost:10500/v1/data&quot;</code></p>
<p>If testing <strong>full end to end with dbapi</strong> which means loc_test acts like a true AP and sends its data only to dbapi</p>
<p><code>python loc_test.py -g &quot;Test&quot; -t 5 -ep 0.10 -np 0.10 -mp &quot;10-0.85-0.99-0.5&quot; -u &quot;http://localhost:10330/v1/recon/data/set&quot;</code></p>
<h2 id="Useful_Functions:">Useful Functions:</h2><h3 id="zip()">zip()</h3><p>listOfMac = [‘A’,’B’,’C’,’D’]<br>listOfNum = [1,2,3,4]<br>zip(listOfMac, listOfNum) = [(‘A’, 1), (‘B’, 2), (‘C’, 3), (‘D’, 4)]  </p>
<h3 id="grep">grep</h3><p>grep file named <code>sniff.py</code> in current directory:</p>
<p><code>grep -rl &quot;sniff.py&quot; .</code></p>
<p><code>-r</code> - (or <code>--recursive</code>)indicates search recursivly<br><code>-l</code> - (or <code>--files-with-matches</code>) only print files name of matching files </p>
<h2 id="Potential_Solution">Potential Solution</h2><p>inside the <code>loc_node.py</code>, utilize the  <code>def filterData(self, d):</code> function.</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="title">WHITELIST_MAC</span> = [<span class="string">'2a:e3:5a:8b:38:cf'</span>, <span class="string">'94:81:90:f9:2f:fc'</span>, <span class="string">'71:b7:4b:54:8e:ec'</span>, <span class="string">'8a:1a:27:0c:55:f6'</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filterData</span><span class="params">(self, d)</span>:</span></span><br><span class="line">    <span class="string">"""Filter some data, if we return true here then skip this data"""</span></span><br><span class="line">	....</span><br><span class="line">	<span class="keyword">if</span> d[<span class="number">2</span>] <span class="keyword">not</span> <span class="keyword">in</span> WHITELIST_MAC:</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    	</span><br><span class="line">    retur <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">def setupArgParse():</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    p.add_argument(<span class="string">'--whitelist'</span>, <span class="string">'-wl'</span>, help=<span class="string">'create MAC white list. usage: -wl "mac0" -wl "mac1"... '</span>, type=str, action=<span class="string">'append'</span>, required=False)</span><br><span class="line">    <span class="keyword">...</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Main function</span></span><br><span class="line"><span class="keyword">if</span>(__name__ == <span class="string">"__main__"</span>):</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(args.whitelist):</span><br><span class="line">        WHITELIST_MAC = args.whitelist</span><br><span class="line">    <span class="keyword">...</span></span><br></pre></td></tr></table></figure>
<h2 id="Errors_encoutered:">Errors encoutered:</h2><p>x86_64-linux-gnu-gcc: internal compiler error: Killed (program cc1)</p>
<p>Please submit a full bug report,</p>
<p>with preprocessed source if appropriate.</p>
<p>See <a href="file:///usr/share/doc/gcc-4.8/README.Bugs" target="_blank" rel="external">file:///usr/share/doc/gcc-4.8/README.Bugs</a> for instructions.</p>
<p>error: command ‘x86_64-linux-gnu-gcc’ failed with exit status 4</p>
<hr>
<p>Cleaning up…<br>Command /usr/bin/python -c “import setuptools, tokenize;<strong>file</strong>=’/tmp/pip<em>build<em>root/pandas/setup.py’;exec(compile(getattr(tokenize, ‘open’, open)(<strong>file</strong>).read().replace(‘\r\n’, ‘\n’), <strong>file</strong>, ‘exec’))” install —record /tmp/pip-6NVncg-record/install-record.txt —single-version-externally-managed —compile failed with error code 1 in /tmp/pip_build_root/pandas<br>Traceback (most recent call last):<br>  File “/usr/bin/pip”, line 9, in <module><br>    load_entry_point(‘pip==1.5.4’, ‘console_scripts’, ‘pip’)()<br>  File “/usr/lib/python2.7/dist-packages/pip/__init</module></em></em>.py”, line 235, in main<br>    return command.main(cmd_args)<br>  File “/usr/lib/python2.7/dist-packages/pip/basecommand.py”, line 161, in main<br>    text = ‘\n’.join(complete_log)<br>UnicodeDecodeError: ‘ascii’ codec can’t decode byte 0xe2 in position 41: ordinal not in range(128)</p>
<hr>
<h3 id="Solutions:">Solutions:</h3><p><a href="http://stackoverflow.com/questions/24455238/lxml-installation-error-ubuntu-14-04-internal-compiler-error" target="_blank" rel="external">Solution from stackoverflow</a></p>
<p>Possible solution (if you have no ability to increase memory on that machine) is to add swap file.</p>
<p><code>sudo dd if=/dev/zero of=/swapfile bs=1024 count=524288</code><br><code>sudo chmod 600 /swapfile</code><br><code>sudo mkswap /swapfile</code><br><code>sudo swapon /swapfile</code><br>from <a href="https://github.com/pydata/pandas/issues/1880#issuecomment-9920484" target="_blank" rel="external">https://github.com/pydata/pandas/issues/1880#issuecomment-9920484</a></p>
<p>This worked for me on smallest digital ocean machine</p>
<h2 id="Schedule:">Schedule:</h2><p>1.white list for MAC address in <code>loc_node</code>  (finsih code on JUN 24th)<br>  white list for MAC address in <code>loc_node</code> (testsed on JUN 26th)</p>
<p>2.The next thing we need to do is add the ability for the createWiFi command to store the AP configuration in our database and then when sniff.py download’s its settings it would start the AP during initialization if those settings are found in the database.</p>
<p>So there are several things that need to change:</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Work/">Work</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ParadropLab/">ParadropLab</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://www.xuyiruan.com/2015/07/02/loc_node_white_list/" data-title="loc_node white list implementation | 威斯星星de小窝" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2015/07/13/ubuntu-snappy-apu/" title="Ubuntu Snappy">
  <strong>上一篇：</strong><br/>
  <span>
  Ubuntu Snappy</span>
</a>
</div>


<div class="next">
<a href="/2015/06/30/sniffencrption_2/"  title="Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project Part2">
 <strong>下一篇：</strong><br/> 
 <span>Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project Part2
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2015/07/02/loc_node_white_list/" data-title="loc_node white list implementation" data-url="http://www.xuyiruan.com/2015/07/02/loc_node_white_list/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目錄</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#TODO:"><span class="toc-number">1.</span> <span class="toc-text">TODO:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Objective:"><span class="toc-number">2.</span> <span class="toc-text">Objective:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Files_to_read/modify:"><span class="toc-number">3.</span> <span class="toc-text">Files to read/modify:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Study_Notes:"><span class="toc-number">4.</span> <span class="toc-text">Study Notes:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Questions:"><span class="toc-number">5.</span> <span class="toc-text">Questions:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Testing:"><span class="toc-number">6.</span> <span class="toc-text">Testing:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Useful_Functions:"><span class="toc-number">7.</span> <span class="toc-text">Useful Functions:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#zip()"><span class="toc-number">7.1.</span> <span class="toc-text">zip()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep"><span class="toc-number">7.2.</span> <span class="toc-text">grep</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Potential_Solution"><span class="toc-number">8.</span> <span class="toc-text">Potential Solution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Errors_encoutered:"><span class="toc-number">9.</span> <span class="toc-text">Errors encoutered:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Solutions:"><span class="toc-number">9.1.</span> <span class="toc-text">Solutions:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Schedule:"><span class="toc-number">10.</span> <span class="toc-text">Schedule:</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
		  
			<li><a href="/categories/DataStructure/" title="DataStructure">DataStructure<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MoblieApplication/" title="MoblieApplication">MoblieApplication<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/RandomThought/" title="RandomThought">RandomThought<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Work/" title="Work">Work<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/leetcode/" title="leetcode">leetcode<sup>1</sup></a></li>
		  
		
		  
		
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ParadropLab/" title="ParadropLab">ParadropLab<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/Life/" title="Life">Life<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/AndroidStudio/" title="AndroidStudio">AndroidStudio<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/linkedlist/" title="linkedlist">linkedlist<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Photography/" title="Photography">Photography<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/UbuntuSnappy/" title="UbuntuSnappy">UbuntuSnappy<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HashTable/" title="HashTable">HashTable<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HashMap/" title="HashMap">HashMap<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/HashSet/" title="HashSet">HashSet<sup>1</sup></a></li>
			
		
			
		
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情鏈接</p>
    <ul>
        
          <li>
            
            	<a href="http://mszhuchinese.com" target="_blank" title="MsZhu Learn Chinese">MsZhu Learn Chinese</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.winniebabe.com" target="_blank" title="Winnie Babe的小窝">Winnie Babe的小窝</a>
            
          </li>
        
          <li>
            
            	<a href="http://suncuss.me" target="_blank" title="孙老板&#39;s Blog">孙老板&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 写代码, 学知识, 为了和你一起活着 <br/>
			尝美食, 游世界, 为了给你更好的生活</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> © 2016 
		
		<a href="http://www.xuyiruan.com/about" target="_blank" title="阮先生">阮先生</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"xruan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-61663668-1', 'www.xuyiruan.com');  
ga('send', 'pageview');
</script>






<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回頂部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  </body>
</html>
