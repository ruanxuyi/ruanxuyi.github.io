<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Bree Serif:300,300italic,400,400italic,700,700italic|Arimo:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="DFS,Tree,LintCode,LeetCode,Binary Search Tree,02-09," />








  <link rel="shortcut icon" type="image/x-icon" href="/images/sushi.png?v=5.0.1" />






<meta name="description" content="Overview LeetCode 236. Lowest Common Ancestor of a Binary Tree Followup1: LeetCode 235. Lowest Common Ancestor of a Binary Search Tree Followup2: LintCode 474. Lowest Common Ancestor II Followup3: Lin">
<meta name="keywords" content="DFS,Tree,LintCode,LeetCode,Binary Search Tree,02-09">
<meta property="og:type" content="article">
<meta property="og:title" content="[LeetCode &amp; LintCode] Lowest Common Ancestor Series">
<meta property="og:url" content="http://www.xuyiruan.com/2019/02/06/Lowest-Common-Ancestor-Series/index.html">
<meta property="og:site_name" content="阮先生de小窝">
<meta property="og:description" content="Overview LeetCode 236. Lowest Common Ancestor of a Binary Tree Followup1: LeetCode 235. Lowest Common Ancestor of a Binary Search Tree Followup2: LintCode 474. Lowest Common Ancestor II Followup3: Lin">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://assets.leetcode.com/uploads/2018/12/14/binarytree.png">
<meta property="og:image" content="https://assets.leetcode.com/uploads/2018/12/14/binarysearchtree_improved.png">
<meta property="og:updated_time" content="2019-02-08T00:24:44.258Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[LeetCode &amp; LintCode] Lowest Common Ancestor Series">
<meta name="twitter:description" content="Overview LeetCode 236. Lowest Common Ancestor of a Binary Tree Followup1: LeetCode 235. Lowest Common Ancestor of a Binary Search Tree Followup2: LintCode 474. Lowest Common Ancestor II Followup3: Lin">
<meta name="twitter:image" content="https://assets.leetcode.com/uploads/2018/12/14/binarytree.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> [LeetCode & LintCode] Lowest Common Ancestor Series | 阮先生de小窝 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">阮先生de小窝</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">多读书 多思考 少吃零食 多睡觉</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                [LeetCode & LintCode] Lowest Common Ancestor Series
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2019-02-06T04:41:19-05:00" content="02-06-2019">
              02-06-2019
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2019/02/06/Lowest-Common-Ancestor-Series/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/02/06/Lowest-Common-Ancestor-Series/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2019/02/06/Lowest-Common-Ancestor-Series/" class="leancloud_visitors" data-flag-title="[LeetCode & LintCode] Lowest Common Ancestor Series">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">visitors </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul>
<li><a href="https://xuyiruan.com/2019/02/06/Lowest-Common-Ancestor-Series/#236-Lowest-Common-Ancestor-of-a-Binary-Tree" target="_blank" rel="noopener">LeetCode 236. Lowest Common Ancestor of a Binary Tree</a></li>
<li><a href="https://xuyiruan.com/2019/02/06/Lowest-Common-Ancestor-Series/#Followup-1-235-Lowest-Common-Ancestor-of-a-Binary-Search-Tree" target="_blank" rel="noopener">Followup1: LeetCode 235. Lowest Common Ancestor of a Binary Search Tree</a></li>
<li><a href="http://localhost:4000/2019/02/06/Lowest-Common-Ancestor-Series/#Followup-2-474-Lowest-Common-Ancestor-II" target="_blank" rel="noopener">Followup2: LintCode 474. Lowest Common Ancestor II</a></li>
<li><a href="https://xuyiruan.com/2019/02/06/Lowest-Common-Ancestor-Series/#Followup-3-578-Lowest-Common-Ancestor-III" target="_blank" rel="noopener">Followup3: LintCode 578. Lowest Common Ancestor III</a></li>
</ul>
<h2 id="236-Lowest-Common-Ancestor-of-a-Binary-Tree"><a href="#236-Lowest-Common-Ancestor-of-a-Binary-Tree" class="headerlink" title="236. Lowest Common Ancestor of a Binary Tree"></a>236. Lowest Common Ancestor of a Binary Tree</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree.</p>
<p>According to the <a href="https://en.wikipedia.org/wiki/Lowest_common_ancestor" target="_blank" rel="noopener">definition of LCA on Wikipedia</a>: “The lowest common ancestor is defined between two nodes <code>p</code> and <code>q</code> as the lowest node in T that has both p and q as descendants (where we allow a node to be a descendant of itself).”</p>
<p>Given the following binary tree:  <code>root = [3,5,1,6,2,0,8,null,null,7,4]</code></p>
<p><img src="https://assets.leetcode.com/uploads/2018/12/14/binarytree.png" alt=""></p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The LCA of nodes 5 and 1 is 3.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: The LCA of nodes 5 and 4 is 5, since a node can be a descendant of itself according to the LCA definition.</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong>:</p>
<ul>
<li>All of the nodes’ values will be unique.</li>
<li>p and q are different and both values will exist in the binary tree.</li>
</ul>
<p><a href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/description/" target="_blank" rel="noopener">&gt; Solve problem here</a> </p>
<a id="more"></a>
<h3 id="Some-test-cases"><a href="#Some-test-cases" class="headerlink" title="Some test cases"></a>Some test cases</h3><ul>
<li>neither <code>p</code> nor <code>q</code> is the LCA</li>
<li>either <code>p</code> or <code>q</code> is the LCA</li>
<li>single node tree</li>
<li>null node</li>
<li><code>p</code> and <code>q</code> are the same node (eliminated by problem statement, follow up 3)</li>
<li>either <code>p</code> or <code>q</code> are <code>null</code> (eliminated by problem statement, follow up 3)</li>
<li>either <code>p</code> or <code>q</code> not exists in tree (eliminated by problem statement, follow up 3)</li>
</ul>
<h3 id="DFS-recursive"><a href="#DFS-recursive" class="headerlink" title="DFS recursive"></a>DFS recursive</h3><p>The recursive dfs approach is straight forward. The time complexity is $O(N)$ since we are traversing each node of the entire tree to find match with <code>p</code> and <code>q</code>. The space complexity is the height of the recursive tree which is $O(logN)$. </p>
<h4 id="DFS-recursive-Algorithm"><a href="#DFS-recursive-Algorithm" class="headerlink" title="DFS recursive Algorithm"></a>DFS recursive Algorithm</h4><p>There are two cases. One case where neither <code>p</code> or <code>q</code> is the LCA. The other case is when either <code>p</code> or <code>q</code> is the LCA. Since the default return type is <code>TreeNode</code>. Lets </p>
<ul>
<li>return <code>root</code> if <code>root == null</code></li>
<li>return <code>root</code> if <code>p == root or q == root</code></li>
<li>return <code>root</code> if <code>left != null &amp;&amp; right != null</code>. </li>
<li>return <code>left</code> if <code>left != null</code>. </li>
<li>Other wise, return <code>right</code>. </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="keyword">if</span> (root == p || root == q) <span class="keyword">return</span> root; <span class="comment">// top-down</span></span><br><span class="line"></span><br><span class="line">        TreeNode left = lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        TreeNode right = lowestCommonAncestor(root.right, p, q);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (left != <span class="keyword">null</span> &amp;&amp; right != <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="keyword">return</span> left == <span class="keyword">null</span> ? right : left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Bottom-up approach also work, but might be less optimzied than version above.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        </span><br><span class="line">        TreeNode left = lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        TreeNode right = lowestCommonAncestor(root.right, p, </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (root == p || root == q) <span class="keyword">return</span> root; <span class="comment">// bottom-up</span></span><br><span class="line">        <span class="keyword">if</span> (left != <span class="keyword">null</span> &amp;&amp; right != <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="keyword">return</span> left == <span class="keyword">null</span> ? right : left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A slight micro-optization for recursive dfs version with 2 if statement checks (intead of 3 checks) in best case.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// recursive DFS v2</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span> || root == p || root == q) <span class="keyword">return</span> root;</span><br><span class="line">    TreeNode left = lowestCommonAncestor(root.left, p, q);</span><br><span class="line">    TreeNode right = lowestCommonAncestor(root.right, p, q);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// two if checks</span></span><br><span class="line">    <span class="keyword">if</span> (left == <span class="keyword">null</span>) <span class="keyword">return</span> right;</span><br><span class="line">    <span class="keyword">if</span> (right == <span class="keyword">null</span>) <span class="keyword">return</span> left;</span><br><span class="line">    <span class="keyword">return</span> root; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// three if checks</span></span><br><span class="line">    <span class="comment">// if (left != null &amp;&amp; right != null) return root;</span></span><br><span class="line">    <span class="comment">// return left == null ? right : left;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="DFS-iterative"><a href="#DFS-iterative" class="headerlink" title="DFS iterative"></a>DFS iterative</h3><p>Iterative DFS with a stack allow tree traversal, however, we still need a way to know node’s parent to find the shared LCA. Hence, as we traversing the tree to find <code>p</code> and <code>q</code>, we also need to record <code>[child -&gt; parent]</code> relation along the way. Time complexity of this algorithm is $O(N)$ in worst case and space complexity is $O(N)$ for iterative <code>stack</code> and the hashmap for storing <code>&lt;child, parent&gt;</code> relation. </p>
<h4 id="DFS-iterative-Algorithm"><a href="#DFS-iterative-Algorithm" class="headerlink" title="DFS iterative Algorithm"></a>DFS iterative Algorithm</h4><ul>
<li>traverse tree itertively with <code>stack</code> to look for <code>p</code> and <code>q</code></li>
<li>use <code>HashMap&lt;TreeNode, TreeNode&gt; parent</code> to record <code>&lt;child, parent&gt;</code> relation.</li>
<li>once both <code>p</code> and <code>q</code> found (child, parent relation for both <code>p</code> and <code>q</code> found)</li>
<li>add <code>p</code>‘s all ancester to a <code>Set</code></li>
<li>traverse <code>q</code>‘s ancesters in order, and first shared ancester is the shared LCA</li>
</ul>
<p>ref: <a href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/discuss/65236/JavaPython-iterative-solution" target="_blank" rel="noopener">https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/discuss/65236/JavaPython-iterative-solution</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// iterative DFS</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor2</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span> || p == <span class="keyword">null</span> || q == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    </span><br><span class="line">    Deque&lt;TreeNode&gt; stack = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">    Map&lt;TreeNode, TreeNode&gt; parent = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// pre-order traversal</span></span><br><span class="line">    stack.push(root);</span><br><span class="line">    parent.put(root, <span class="keyword">null</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (!parent.containsKey(p) || !parent.containsKey(q)) &#123;</span><br><span class="line">        TreeNode node = stack.pop();</span><br><span class="line">        <span class="keyword">if</span> (node.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            parent.put(node.right, node);</span><br><span class="line">            stack.push(node.right);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            parent.put(node.left, node);</span><br><span class="line">            stack.push(node.left);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// find LCA</span></span><br><span class="line">    Set&lt;TreeNode&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    TreeNode node = p;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        set.add(node);</span><br><span class="line">        node = parent.get(node);</span><br><span class="line">    &#125;</span><br><span class="line">    node = q;</span><br><span class="line">    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (set.contains(node)) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node = parent.get(node);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Followup-1-235-Lowest-Common-Ancestor-of-a-Binary-Search-Tree"><a href="#Followup-1-235-Lowest-Common-Ancestor-of-a-Binary-Search-Tree" class="headerlink" title="[Followup 1] 235. Lowest Common Ancestor of a Binary Search Tree"></a>[Followup 1] 235. Lowest Common Ancestor of a Binary Search Tree</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><p>Given a binary search tree (BST), find the lowest common ancestor (LCA) of two given nodes in the BST.</p>
<p>According to the definition of LCA on Wikipedia: “The lowest common ancestor is defined between two nodes p and q as the lowest node in T that has both p and q as descendants (where we allow <strong>a node to be a descendant of itself</strong>).”</p>
<p>Given binary search tree:  <code>root = [6,2,8,0,4,7,9,null,null,3,5]</code></p>
<p><img src="https://assets.leetcode.com/uploads/2018/12/14/binarysearchtree_improved.png" alt=""></p>
<p><a href="https://www.lintcode.com/problem/lowest-common-ancestor-ii/description" target="_blank" rel="noopener">&gt; Solve problem here</a></p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: The LCA of nodes 2 and 8 is 6.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: The LCA of nodes 2 and 4 is 2, since a node can be a descendant of itself according to the LCA definition.</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong>:</p>
<ul>
<li>All of the nodes’ values will be unique.</li>
<li><code>p</code> and <code>q</code> are different and both values will exist in the BST.</li>
</ul>
<h3 id="Thought"><a href="#Thought" class="headerlink" title="Thought"></a>Thought</h3><p>Since it is a BST, we start from root of the tree, if <code>p.val</code> &amp; <code>q.val</code> are both smaller than <code>root.val</code>, <code>p</code> and <code>q</code> are in the left subtree. If <code>p.val</code> &amp; <code>q.val</code> are both larger than <code>root.val</code>, both node are at right subtree. Otherwise, <code>root</code> is the lowest ancester. (last ancester). </p>
<p>Beacuse the special structure of BST, we only need to visit at most $log(N)$ node along the way. Hence, the time complexity is $O(log N)$. The space complexity is $O(log N)$ for height of the recursive stack.</p>
<h3 id="Recursive"><a href="#Recursive" class="headerlink" title="Recursive"></a>Recursive</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span> || root == p || root == q) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="keyword">if</span> (p.val &lt; root.val &amp;&amp; q.val &lt; root.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.val &gt; root.val &amp;&amp; q.val &gt; root.val) &#123;</span><br><span class="line">            <span class="keyword">return</span> lowestCommonAncestor(root.right, p, q);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Iterative-w-queue"><a href="#Iterative-w-queue" class="headerlink" title="Iterative w/ queue"></a>Iterative w/ queue</h3><p>Time: $O(logN)$ and Space: $O(logN)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        Deque&lt;TreeNode&gt; queue = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">        queue.offer(root);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">            TreeNode node = queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (p.val &lt; node.val &amp;&amp; q.val &lt; node.val) &#123;</span><br><span class="line">                queue.offer(node.left);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.val &gt; node.val &amp;&amp; q.val &gt; node.val) &#123;</span><br><span class="line">                queue.offer(node.right);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Iterative-wo-queue-preferred"><a href="#Iterative-wo-queue-preferred" class="headerlink" title="Iterative wo/ queue [preferred]"></a>Iterative wo/ queue [preferred]</h3><p>Time: $O(logN)$ and Space: $O(1)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        TreeNode node = root;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p.val &lt; node.val &amp;&amp; q.val &lt; node.val) &#123;</span><br><span class="line">                node = node.left;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (p.val &gt; node.val &amp;&amp; q.val &gt; node.val) &#123;</span><br><span class="line">                node = node.right;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Followup-2-474-Lowest-Common-Ancestor-II"><a href="#Followup-2-474-Lowest-Common-Ancestor-II" class="headerlink" title="[Followup 2] 474. Lowest Common Ancestor II"></a>[Followup 2] 474. Lowest Common Ancestor II</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><p>Given the root and two nodes in a Binary Tree. Find the lowest common ancestor (LCA) of the two nodes. The lowest common ancestor is the node with largest depth which is the ancestor of both nodes. The node has an extra attribute parent which point to the father of itself. The root’s parent is null.</p>
<p><a href="https://www.lintcode.com/problem/lowest-common-ancestor-ii/description" target="_blank" rel="noopener">&gt; Solve problem here</a></p>
<p><strong>Example</strong>   </p>
<p>Example 1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">      4</span><br><span class="line">     / \</span><br><span class="line">    3   7</span><br><span class="line">       / \</span><br><span class="line">      5   6</span><br><span class="line">and 3,5</span><br><span class="line">Output: 4</span><br><span class="line">Explanation:LCA(3, 5) = 4</span><br></pre></td></tr></table></figure>
<p>Example 2:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line">      4</span><br><span class="line">     / \</span><br><span class="line">    3   7</span><br><span class="line">       / \</span><br><span class="line">      5   6</span><br><span class="line">and 5,6</span><br><span class="line">Output: 7</span><br><span class="line">Explanation:LCA(5, 6) = 7</span><br></pre></td></tr></table></figure>
<h3 id="Thought-1"><a href="#Thought-1" class="headerlink" title="Thought"></a>Thought</h3><p>The follow up problem provides extra parent pointer for each TreeNode. With this, we can eliminate the time requires to traverse the entire tree to locate <code>p</code> and <code>q</code> node. Instead, we can trace directly from <code>p</code> node to <code>root</code> and add all its ancester to a <code>Set</code> in ordder. Then trace from <code>q</code> to <code>root</code> and return the first shared node as LCA</p>
<h3 id="Iterative-solution-with-Set"><a href="#Iterative-solution-with-Set" class="headerlink" title="Iterative solution with Set"></a>Iterative solution with Set</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @param root: The root of the tree</span></span><br><span class="line"><span class="comment">     * @param A: node in the tree</span></span><br><span class="line"><span class="comment">     * @param B: node in the tree</span></span><br><span class="line"><span class="comment">     * @return: The lowest common ancestor of A and B</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ParentTreeNode <span class="title">lowestCommonAncestorII</span><span class="params">(ParentTreeNode root, ParentTreeNode A, ParentTreeNode B)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code here</span></span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span> || A == <span class="keyword">null</span> || B == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	    </span><br><span class="line">	    <span class="comment">// find LCA</span></span><br><span class="line">	    Set&lt;ParentTreeNode&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">	    ParentTreeNode node = A;</span><br><span class="line">	    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">	        set.add(node);</span><br><span class="line">	        node = node.parent;</span><br><span class="line">	    &#125;</span><br><span class="line">	    node = B;</span><br><span class="line">	    <span class="keyword">while</span> (node != <span class="keyword">null</span>) &#123;</span><br><span class="line">	        <span class="keyword">if</span> (set.contains(node)) &#123;</span><br><span class="line">	            <span class="keyword">break</span>;</span><br><span class="line">	        &#125;</span><br><span class="line">	        node = node.parent;</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Followup-3-578-Lowest-Common-Ancestor-III"><a href="#Followup-3-578-Lowest-Common-Ancestor-III" class="headerlink" title="[Followup 3] 578. Lowest Common Ancestor III"></a>[Followup 3] 578. Lowest Common Ancestor III</h2><p><strong>Description</strong></p>
<p>Given the root and two nodes in a Binary Tree. Find the lowest common ancestor(LCA) of the two nodes.<br>The lowest common ancestor is the node with largest depth which is the ancestor of both nodes.<br>Return null if LCA does not exist.</p>
<p><strong>Note</strong>: node <code>A</code> or node <code>B</code> may not exist in tree.</p>
<p><strong>Example</strong></p>
<p>For the following binary tree:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  4</span><br><span class="line"> / \</span><br><span class="line">3   7</span><br><span class="line">   / \</span><br><span class="line">  5   6</span><br><span class="line"></span><br><span class="line">LCA(3, 5) = 4</span><br><span class="line">LCA(5, 6) = 7</span><br><span class="line">LCA(6, 7) = 7</span><br></pre></td></tr></table></figure>
<p>In this followup question</p>
<ul>
<li>node <code>A</code> or node <code>B</code> may not exist in tree</li>
<li>node <code>A</code> and node <code>B</code> might also be the same node</li>
</ul>
<p>It is very similiar to the original problem by adding only two line of code with two extra boolean varaibles <code>foundA</code> and <code>foundB</code> and some logic to record if both nodes were found. Time complxity $O(N)$ and space complexity is the recursive stack $O(logN)$</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ref: https://www.jiuzhang.com/solution/lowest-common-ancestor-iii/#tag-other</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @param root: The root of the binary tree.</span></span><br><span class="line"><span class="comment">     * @param A: A TreeNode</span></span><br><span class="line"><span class="comment">     * @param B: A TreeNode</span></span><br><span class="line"><span class="comment">     * @return: Return the LCA of the two nodes.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> foundA, foundB;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor3</span><span class="params">(TreeNode root, TreeNode A, TreeNode B)</span> </span>&#123;</span><br><span class="line">        TreeNode lca = helper(root, A, B);</span><br><span class="line">        <span class="keyword">if</span> (foundA &amp;&amp; foundB) &#123;</span><br><span class="line">            <span class="keyword">return</span> lca;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">helper</span><span class="params">(TreeNode root, TreeNode A, TreeNode B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// left &amp; right</span></span><br><span class="line">        TreeNode left = helper(root.left, A, B);</span><br><span class="line">        TreeNode right = helper(root.right, A, B);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (root == A || root == B) &#123;</span><br><span class="line">            <span class="keyword">if</span> (root == A) foundA = <span class="keyword">true</span>; <span class="comment">// follow up 3</span></span><br><span class="line">            <span class="keyword">if</span> (root == B) foundB = <span class="keyword">true</span>; <span class="comment">// follow up 3</span></span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (left != <span class="keyword">null</span> &amp;&amp; right != <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="keyword">return</span> left == <span class="keyword">null</span> ? right : left;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul>
<li>recursive dfs</li>
<li>iterative dfs</li>
<li>idea of top-down and bottom-up</li>
<li>generate own parent pointer / given parent’s pointer</li>
<li>what to change if <code>p</code>, and <code>q</code> not guarntee exists in tree</li>
</ul>
<h2 id="Logs"><a href="#Logs" class="headerlink" title="Logs"></a>Logs</h2><ul>
<li>02/06/2019: add solutions</li>
<li>TODO: review iterative dfs</li>
<li>TODO: review follow up 3</li>
<li>TODO: Lowest Common Ancestor of a Binary Search Tree 思路lowst ancester 那块过一遍</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>
      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/DFS/" rel="tag">#DFS</a>
          
            <a href="/tags/Tree/" rel="tag">#Tree</a>
          
            <a href="/tags/LintCode/" rel="tag">#LintCode</a>
          
            <a href="/tags/LeetCode/" rel="tag">#LeetCode</a>
          
            <a href="/tags/Binary-Search-Tree/" rel="tag">#Binary Search Tree</a>
          
            <a href="/tags/02-09/" rel="tag">#02-09</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/02/05/lint596-Minimum-Subtree/" rel="next" title="Lint596. Minimum Subtree">
                <i class="fa fa-chevron-left"></i> Lint596. Minimum Subtree
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/12/leet269-Alien-Dictionary/" rel="prev" title="Leet269 - Alien Dictionary">
                Leet269 - Alien Dictionary <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/author.jpg"
               alt="🍣之神" />
          <p class="site-author-name" itemprop="name">🍣之神</p>
          <p class="site-description motion-element" itemprop="description">阮先生’s blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">40</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ruanxuyi" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.instagram.com/xuyiruan/" target="_blank" title="Instagram">
                  
                    <i class="fa fa-fw fa-instagram"></i>
                  
                  Instagram
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/xuyi-ruan-a728a889" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://mszhuchinese.com" title="MsZhuChinese" target="_blank">MsZhuChinese</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.winniebabe.com" title="WinnieBabe" target="_blank">WinnieBabe</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://suncuss.me" title="BossSun" target="_blank">BossSun</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#236-Lowest-Common-Ancestor-of-a-Binary-Tree"><span class="nav-number">2.</span> <span class="nav-text">236. Lowest Common Ancestor of a Binary Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Description"><span class="nav-number">2.1.</span> <span class="nav-text">Description</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-test-cases"><span class="nav-number">2.2.</span> <span class="nav-text">Some test cases</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DFS-recursive"><span class="nav-number">2.3.</span> <span class="nav-text">DFS recursive</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DFS-recursive-Algorithm"><span class="nav-number">2.3.1.</span> <span class="nav-text">DFS recursive Algorithm</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DFS-iterative"><span class="nav-number">2.4.</span> <span class="nav-text">DFS iterative</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DFS-iterative-Algorithm"><span class="nav-number">2.4.1.</span> <span class="nav-text">DFS iterative Algorithm</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Followup-1-235-Lowest-Common-Ancestor-of-a-Binary-Search-Tree"><span class="nav-number">3.</span> <span class="nav-text">[Followup 1] 235. Lowest Common Ancestor of a Binary Search Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Description-1"><span class="nav-number">3.1.</span> <span class="nav-text">Description</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thought"><span class="nav-number">3.2.</span> <span class="nav-text">Thought</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Recursive"><span class="nav-number">3.3.</span> <span class="nav-text">Recursive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterative-w-queue"><span class="nav-number">3.4.</span> <span class="nav-text">Iterative w/ queue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterative-wo-queue-preferred"><span class="nav-number">3.5.</span> <span class="nav-text">Iterative wo/ queue [preferred]</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Followup-2-474-Lowest-Common-Ancestor-II"><span class="nav-number">4.</span> <span class="nav-text">[Followup 2] 474. Lowest Common Ancestor II</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Description-2"><span class="nav-number">4.1.</span> <span class="nav-text">Description</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thought-1"><span class="nav-number">4.2.</span> <span class="nav-text">Thought</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Iterative-solution-with-Set"><span class="nav-number">4.3.</span> <span class="nav-text">Iterative solution with Set</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Followup-3-578-Lowest-Common-Ancestor-III"><span class="nav-number">5.</span> <span class="nav-text">[Followup 3] 578. Lowest Common Ancestor III</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">6.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logs"><span class="nav-number">7.</span> <span class="nav-text">Logs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">8.</span> <span class="nav-text">Reference</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">🍣之神</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'xruan';
      var disqus_identifier = '2019/02/06/Lowest-Common-Ancestor-Series/';
      var disqus_title = "[LeetCode & LintCode] Lowest Common Ancestor Series";
      var disqus_url = 'http://www.xuyiruan.com/2019/02/06/Lowest-Common-Ancestor-Series/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("oKoPG1XTXkC7T1oasGQwau2g-gzGzoHsz", "JFJCQtIsUKhrX6S7Gvgqdqgk");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
