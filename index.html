
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>来自威斯星星大学的一个小猩猩</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="阮先生">
    

    
    <meta name="description" content="阮先生’s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="来自威斯星星大学的一个小猩猩">
<meta property="og:url" content="http://www.xuyiruan.com/index.html">
<meta property="og:site_name" content="来自威斯星星大学的一个小猩猩">
<meta property="og:description" content="阮先生’s blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="来自威斯星星大学的一个小猩猩">
<meta name="twitter:description" content="阮先生’s blog">


    
    <link rel="alternative" href="/atom.xml" title="来自威斯星星大学的一个小猩猩" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/logo.png">
    
    
    <link rel="apple-touch-icon" href="/img/sushi.png">
    <link rel="apple-touch-icon-precomposed" href="/img/sushi.png">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/sushi.png" alt="来自威斯星星大学的一个小猩猩" title="来自威斯星星大学的一个小猩猩"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="来自威斯星星大学的一个小猩猩">来自威斯星星大学的一个小猩猩</a></h1>
				<h2 class="blog-motto">沉下心 多读书 多思考 少吃QQ 多睡觉</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/tags">Tags</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.xuyiruan.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/26/loc_node_white_list/" title="loc_node white list implementation" itemprop="url">loc_node white list implementation</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-26T21:41:05.000Z" itemprop="datePublished"> 发表于 06-26-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><img src="http://7xihzu.com1.z0.glb.clouddn.com/work.loc_white_list.jpg" alt="Localization Project" style="width:600px;"></p>
<h2 id="TODO:">TODO:</h2><ol>
<li>end-to-end dbapi testing</li>
</ol>
<h2 id="Objective:">Objective:</h2><p>Create a white list filter for specfic MAC address to allow localization data to pass to <code>loc</code> instance from <code>loc_node</code>.<br>look at code in <code>loc_node</code> to see poetential place to add white list filtering in.</p>
<h2 id="Files_to_read/modify:">Files to read/modify:</h2><ol>
<li><code>/home/xuyi/paradrop/trunk/scripts/recon_locmgmt.py</code></li>
<li><code>/home/xuyi/paradrop/trunk/scripts/recon_loc.conf</code> - configuration file to create specific <code>loc</code> instances follow by <code>loc_node</code></li>
<li><code>/home/xuyi/paradrop/trunk/backend/loc/loc_node.py</code> - receive raw data (RSSI data) forward by <code>dbapi</code> and filter the  raw data by last digit of the associated MAC address. ex. (0-7) goes to <code>loc1</code> and (8-F) goes to <code>loc2</code>. We need to add new function to filter specific MAC by creating a white list.  </li>
<li><code>/home/xuyi/paradrop/trunk/backend/loc/loc.py</code> - the sever that process and compute the raw data from <code>loc_node</code> then sent computed data back to <code>dbapi_server</code> and store there.</li>
<li></li>
</ol>
<h2 id="Study_Notes:">Study Notes:</h2><p>1.in side the <code>loc_node.py</code> file, function <code>generateMacMap</code> generates a dictionary <code>macMap</code> that map <code>last char of MAC</code> to <code>loc id number</code></p>
<p>2.<code>macMap</code> takes <code>char</code> and returns <code>loc id number</code></p>
<p>3.<code>locData</code> is a dictionary where key(might be <code>number</code>) -&gt; value (might be <code>data</code>)</p>
<p>4.<code>locMap</code> should be a dictonary of mapping from <code>loc number</code>: <code>data</code></p>
<p><code>locMap</code> -&gt; {0:[data1, data2, data3…], 1:[data1, data2, data3..], 2:[d1, d2..] …}</p>
<p>5.<code>determineLoc(macMap, d)</code> returns  <code>macMap[d[2][-1]]</code> which is a <code>loc id numnber</code>, </p>
<p>6.Get MAC address: <code>d[2]</code></p>
<p>7.Get the last char of MAC address: <code>d[2][-1]</code></p>
<p>8.Use the last char of MAC to get its <code>loc id num</code>: <code>macMap[d[2][-1]]</code></p>
<p>9.<code>defer_parseData</code> function inside <code>loc_node.py</code> is the method send <code>data</code> to specific <code>loc module</code>, have a white list filter MAC address here will be reasonable.</p>
<p>10.<code>myLocData</code> = <code>locData</code>, <code>locData</code> stores the information of the current <code>loc</code> inlclude the number of loc modules is running. </p>
<p>11.<code>genearteMacMap</code>‘s primary function is to divide 0-F 16 possibles of last char of the MAC address into number of group to do computation. That number determine by current number of running <code>loc module</code>(determine by <code>myLocData</code>)</p>
<p>cat scripts/recon_loc.conf<br>python scripts/recon_locmgmt.py -g “State Street” —check</p>
<p>svn status</p>
<p>svn ci -m “DFW: added password support to SSID startup”</p>
<h2 id="Questions:">Questions:</h2><ol>
<li><p>Can I run command under xuyi@paradrop.wings? will that mess with the current system  - yes, run with diffrent port to not mess with the current PROD system.</p>
</li>
<li><p>what is the command to create <code>loc</code> and <code>loc_node</code> with configuration file <code>recon_loc.cnf</code> ?</p>
</li>
<li><p><code>locData</code>?? format ??  - <code>locData</code> stroes infomation about the current running <code>loc</code> instance, <code>len(locData.keys())</code> return the number of currnt running loc instance. </p>
</li>
<li><p>does d[2] detach the MAC adress from the data?  yes</p>
</li>
<li>How will the MAC address be imported to the WHITELIST?? </li>
</ol>
<h2 id="Testing:">Testing:</h2><p>open multiple tabs for running <code>loc_server</code>, <code>loc_node</code>,<code>loc</code>  </p>
<p><a href="http://wirelessathome.wings.cs.wisc.edu/redmine/projects/paradrop/wiki/Recon_Localization" target="_blank" rel="external">detail wiki here</a></p>
<p><strong>0.Run dbapi:</strong>  </p>
<p>In some cases you might want to test the FULL end to end system which would include the dbapi, in this case you can run dbapi as follows:</p>
<p><code>python dbapi/dbapi_server.py -s DBAPI_RECON_SNIFF_DISABLE_DB:True -s LOC_SERVER_URL:http://localhost</code></p>
<p><strong>1.Run <code>loc_server</code>:</strong>  </p>
<p><code>python loc_server.py -s LOC_SERVER_DISABLE_DB:True</code></p>
<p><strong>2.Run <code>loc_node</code>:</strong>  </p>
<p><code>python loc_node.py -g &quot;Test&quot; --id 0 -s LOC_SERVER_URL:http://localhost -s LOC_NODE_URL:http://localhost</code></p>
<p><strong>3.Run two instanc of <code>loc</code>:</strong>  </p>
<p>Instance 0:<br><code>python loc.py --id 0 -g &quot;Test&quot; --guarantee 8 -s LOC_SERVER_URL:http://localhost -s LOC_URL:http://localhost</code></p>
<p>Instance 1:<br><code>python loc.py --id 1 -g &quot;Test&quot; --guarantee 8 -s LOC_SERVER_URL:http://localhost -s LOC_URL:http://localhost</code></p>
<p><strong>The loc_test</strong>  </p>
<p>If testing <strong>directly with loc_node</strong> (ie. loc_test bypasses dbapi and sends the raw data directly to loc_node)</p>
<p><code>python loc_test.py -g &quot;Test&quot; -t 5 -ep 0.10 -np 0.10 -mp &quot;10-0.85-0.99-0.5&quot; -u &quot;http://localhost:10500/v1/data&quot;</code></p>
<p>If testing <strong>full end to end with dbapi</strong> which means loc_test acts like a true AP and sends its data only to dbapi</p>
<p><code>python loc_test.py -g &quot;Test&quot; -t 5 -ep 0.10 -np 0.10 -mp &quot;10-0.85-0.99-0.5&quot; -u &quot;http://localhost:10330/v1/recon/data/set&quot;</code></p>
<h2 id="Useful_Functions:">Useful Functions:</h2><h3 id="zip()">zip()</h3><p>listOfMac = [‘A’,’B’,’C’,’D’]<br>listOfNum = [1,2,3,4]<br>zip(listOfMac, listOfNum) = [(‘A’, 1), (‘B’, 2), (‘C’, 3), (‘D’, 4)]  </p>
<h3 id="grep">grep</h3><p>grep file named <code>sniff.py</code> in current directory:</p>
<p><code>grep -rl &quot;sniff.py&quot; .</code></p>
<p><code>-r</code> - (or <code>--recursive</code>)indicates search recursivly<br><code>-l</code> - (or <code>--files-with-matches</code>) only print files name of matching files </p>
<h2 id="Potential_Solution">Potential Solution</h2><p>inside the <code>loc_node.py</code>, utilize the  <code>def filterData(self, d):</code> function.</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="title">WHITELIST_MAC</span> = [<span class="string">'2a:e3:5a:8b:38:cf'</span>, <span class="string">'94:81:90:f9:2f:fc'</span>, <span class="string">'71:b7:4b:54:8e:ec'</span>, <span class="string">'8a:1a:27:0c:55:f6'</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filterData</span><span class="params">(self, d)</span>:</span></span><br><span class="line">    <span class="string">"""Filter some data, if we return true here then skip this data"""</span></span><br><span class="line">	....</span><br><span class="line">	<span class="keyword">if</span> d[<span class="number">2</span>] <span class="keyword">not</span> <span class="keyword">in</span> WHITELIST_MAC:</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    	</span><br><span class="line">    retur <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="Errors_encoutered:">Errors encoutered:</h2><p>x86_64-linux-gnu-gcc: internal compiler error: Killed (program cc1)</p>
<p>Please submit a full bug report,</p>
<p>with preprocessed source if appropriate.</p>
<p>See <a href="file:///usr/share/doc/gcc-4.8/README.Bugs" target="_blank" rel="external">file:///usr/share/doc/gcc-4.8/README.Bugs</a> for instructions.</p>
<p>error: command ‘x86_64-linux-gnu-gcc’ failed with exit status 4</p>
<hr>
<p>Cleaning up…<br>Command /usr/bin/python -c “import setuptools, tokenize;<strong>file</strong>=’/tmp/pip<em>build<em>root/pandas/setup.py’;exec(compile(getattr(tokenize, ‘open’, open)(<strong>file</strong>).read().replace(‘\r\n’, ‘\n’), <strong>file</strong>, ‘exec’))” install —record /tmp/pip-6NVncg-record/install-record.txt —single-version-externally-managed —compile failed with error code 1 in /tmp/pip_build_root/pandas<br>Traceback (most recent call last):<br>  File “/usr/bin/pip”, line 9, in <module><br>    load_entry_point(‘pip==1.5.4’, ‘console_scripts’, ‘pip’)()<br>  File “/usr/lib/python2.7/dist-packages/pip/__init</module></em></em>.py”, line 235, in main<br>    return command.main(cmd_args)<br>  File “/usr/lib/python2.7/dist-packages/pip/basecommand.py”, line 161, in main<br>    text = ‘\n’.join(complete_log)<br>UnicodeDecodeError: ‘ascii’ codec can’t decode byte 0xe2 in position 41: ordinal not in range(128)</p>
<hr>
<h3 id="Solutions:">Solutions:</h3><p><a href="http://stackoverflow.com/questions/24455238/lxml-installation-error-ubuntu-14-04-internal-compiler-error" target="_blank" rel="external">Solution from stackoverflow</a></p>
<p>Possible solution (if you have no ability to increase memory on that machine) is to add swap file.</p>
<p><code>sudo dd if=/dev/zero of=/swapfile bs=1024 count=524288</code><br><code>sudo chmod 600 /swapfile</code><br><code>sudo mkswap /swapfile</code><br><code>sudo swapon /swapfile</code><br>from <a href="https://github.com/pydata/pandas/issues/1880#issuecomment-9920484" target="_blank" rel="external">https://github.com/pydata/pandas/issues/1880#issuecomment-9920484</a></p>
<p>This worked for me on smallest digital ocean machine</p>
<h2 id="Schedule:">Schedule:</h2><p>1.white list for MAC address in <code>loc_node</code>  (finsih code on JUN 24th)<br>  white list for MAC address in <code>loc_node</code> (testsed on JUN 26th)</p>
<p>2.The next thing we need to do is add the ability for the createWiFi command to store the AP configuration in our database and then when sniff.py download’s its settings it would start the AP during initialization if those settings are found in the database.</p>
<p>So there are several things that need to change:</p>
<p>-Dale</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/work/">work</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/paradrop/">paradrop</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/26/loc_node_white_list/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/26/loc_node_white_list/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/24/serverApConfig/" title="Store AP config in dbapi server" itemprop="url">Store AP config in dbapi server</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-24T21:37:47.000Z" itemprop="datePublished"> 发表于 06-24-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Objective:">Objective:</h2><p>At this stage, we send command from dbapi server (<code>dbapi_tool.py</code>) to create AP (with <code>createWiFi</code> function) on the router side (<code>sniff.py</code>). If we store this AP configuration (<code>hostapd.conf</code>) into database, so that everytime sniff.py initialiate, it check if AP config file exists in server, if exists, automatically start <code>hostapd</code> with the correcponding config retrict from the server to create an AP. Other wise, do not create the AP. </p>
<h2 id="Instruction:">Instruction:</h2><ol>
<li><p>sniff.py during init needs to look for AP settings from the database and start an AP if they exist</p>
</li>
<li><p>dbapi_recon.py the POST_createWifi() command needs to now push the AP settings into the database for configuration. If you are not comfortable writing this code I can do it</p>
</li>
<li><p>dbapi_recon.py the POST_destroyWiFi() command needs to remove these settings from the database configuration, again I can write this but not until next week probably.</p>
</li>
</ol>
<p>To start, I would recommend that you change the sniff.py file so that during init it looks for the AP settings and it sets up hostapd if they are found. We can manually change the database configuration to have these extra settings without changing the dbapi_recon.py file, so this would be the easiest thing to do first.</p>
<h2 id="Thought_Process:">Thought Process:</h2><p>Inside <code>sniff.py</code> file,  </p>
<p><code>_getConfigSettings(self)</code> function get the configure files from dbapi server.</p>
<p><code>_setConfig(cfg)</code> read the config file (from dbapi server) and do the reqiured configuration for sniff instance. </p>
<p><code>cfg</code> - configuration object is a <strong>dictionary</strong> with configure information. </p>
<h2 id="Modify_files:">Modify files:</h2><p><code>sniff.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_setConfig</span><span class="params">(self, cfg)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">            Takes a config object returned from the dbapi and sets the proper flags.</span><br><span class="line">        """</span></span><br><span class="line"></span><br><span class="line">		...</span><br><span class="line">		</span><br><span class="line">        <span class="comment"># set up Wifi access point</span></span><br><span class="line">        <span class="comment"># ?? completed ??</span></span><br><span class="line">        ap = cfg.get(<span class="string">'ap'</span>, <span class="keyword">None</span>)</span><br><span class="line">        <span class="keyword">if</span> (ap):</span><br><span class="line">            self._modeCreateSSID(ap, completed)</span><br><span class="line">		...</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<h2 id="Question:">Question:</h2><p><code>_modeCreateSSID(ap, completed)</code> ?? completed ??</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/work/">work</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/paradrop/">paradrop</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/24/serverApConfig/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/24/serverApConfig/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/24/grep_function/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-24T20:49:59.000Z" itemprop="datePublished"> 发表于 06-24-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Introduction">Introduction</h2><h2 id="Usage:">Usage:</h2><h3 id="Search_location_of_files:">Search location of files:</h3><p>grep file named <code>sniff.py</code> in current directory:</p>
<p><code>grep -rl &quot;sniff.py&quot; .</code></p>
<p><code>-r</code> - (or <code>--recursive</code>)indicates search recursivly<br><code>-l</code> - (or <code>--files-with-matches</code>) only print files name of matching files </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/24/grep_function/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/24/grep_function/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/19/sniffencrption_2/" title="Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project Part2" itemprop="url">Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project Part2</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-19T20:39:30.000Z" itemprop="datePublished"> 发表于 06-19-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="List_of_files:"><strong>List of files:</strong></h2><h3 id="server_side:">server side:</h3><p><code>dbapi_recon.py</code> - manage the format of the POST<br><code>dbapi_tool.py</code> - take command line from terminal and put parameters into a JSON package  </p>
<h3 id="router_side:">router side:</h3><p><code>sniff.py</code> - receive pacakge from dbapi_server, and extracts the parameters (ssid, chan, pw, etc.)<br><code>iw.py</code> - the file actual set up necessary configuration for a wireless network, and run commnad through command line and startHostapd to create AP. </p>
<p>inside <code>sniff.py</code>, add folloiwng:</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">pw = modeData.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'password'</span>, None)</span></span></span><br><span class="line">....</span><br><span class="line">res = iw.<span class="function"><span class="title">startHostapd</span><span class="params">(<span class="string">'wlan0'</span>, ssid, chan, pw)</span></span></span><br></pre></td></tr></table></figure>
<h2 id="Diagram:"><strong>Diagram:</strong></h2><p><code>dbapi_tool</code> —- send JSON message to —&gt; <code>dbapi server</code> &lt;—-receive/send JSON package——&gt; <code>sniff.py</code>  </p>
<p>package: JSON object.  </p>
<p><code>moni1</code> - interface to monitor wifi traffic:</p>
<pre><code><span class="tag">Interface</span> <span class="tag">moni1</span>
    <span class="tag">ifindex</span> 9361
    <span class="tag">wdev</span> 0<span class="tag">x100002490</span>
    <span class="tag">addr</span> 04<span class="pseudo">:f0</span><span class="pseudo">:21</span><span class="pseudo">:10</span><span class="pseudo">:c0</span><span class="pseudo">:d8</span>
    <span class="tag">type</span> <span class="tag">monitor</span>
</code></pre><h2 id="Useful_commands:"><strong>Useful commands: </strong></h2><pre><code>python services/pddb<span class="class">.py</span> -f whois -<span class="tag">a</span> halo32
</code></pre><p>Output indicates which group belong to:</p>
<pre><code>Calling whois((&lt;services.pdsql.PDSql instance at <span class="number">0x45b4d40</span>&gt;, <span class="string">'halo32'</span>))
-- <span class="string">AP:</span> halo32 (<span class="string">WN855702 :</span>: f2ff1c8d-bec8-<span class="number">4</span>a08-aedc-ab72861fa694) <span class="string">IP:</span> <span class="number">10.6</span><span class="number">.0</span><span class="number">.206</span> <span class="string">LOC:</span> WiNGS Lab, Madison WI
<span class="label"> OWNER:</span> <span class="string">CS :</span> test (<span class="number">9520</span>f0c5-b884-<span class="number">11e4</span>-a360-<span class="number">00265511043</span>e) <span class="string">GROUP:</span> Test
<span class="label"> RECON:</span> <span class="string">rid:</span> <span class="number">40</span>, <span class="string">reconid:</span> <span class="number">10</span>, <span class="string">GROUP:</span> Test
</code></pre><p>show the difference of the modification: </p>
<pre><code><span class="title">svn</span> diff dbapi/dbapi_recon.py
</code></pre><h2 id="Thought_Process:"><strong>Thought Process:</strong></h2><p>Modify code on <code>xuyi@paradrop.wings.wisc.edu</code>  </p>
<p>inside <code>/home/xuyi/paradrop/trunk/recon/dbapi_tool.py</code> add password option in</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createWifi</span><span class="params">(dbh, baseUrl, token, group, ssid, chan, pw)</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">        Creates a wifi network on the group APs provided.</span><br><span class="line">        Arguments:</span><br><span class="line">            @ssid : The SSID to set each device to</span><br><span class="line">            @chan : The channel, can be string like '36+1' for HT40+</span><br><span class="line">            @pw : The password for Wi-Fi</span><br><span class="line">    """</span></span><br><span class="line">    url = <span class="string">'%s/wifi/%s/create'</span> % (baseUrl, urlEncodeMe(group, <span class="string">""</span>))</span><br><span class="line">    out.info(<span class="string">'-- %s Creating WiFi: %s\n'</span> % (logPrefix(), url))</span><br><span class="line"></span><br><span class="line">    msg = &#123;<span class="string">"sessionToken"</span>:token&#125;</span><br><span class="line">    msg[<span class="string">'ssid'</span>] = ssid</span><br><span class="line">    msg[<span class="string">'channel'</span>] = chan</span><br><span class="line">    msg[<span class="string">'pw'</span>] = pw</span><br><span class="line">    </span><br><span class="line">    res = pdweb.post(url, json2str(msg), <span class="keyword">None</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">not</span> pdweb.isOK(res)):</span><br><span class="line">        out.warn(<span class="string">'** Failed: %s\n'</span> % str(res))</span><br><span class="line">        exit()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        out.info(<span class="string">'-- %s\n'</span> % pdweb.data(res))</span><br></pre></td></tr></table></figure>
<p>Run command with <code>dbapi_tool</code> to tell the <code>sniff.py</code> in router to setup a AP with password</p>
<pre><code>python recon/dbapi_tool<span class="class">.py</span> -g Test -f createWifi -<span class="tag">a</span> testRXY -<span class="tag">a</span> <span class="number">36</span> -<span class="tag">a</span> paradroprocks
</code></pre><p>send JSON package (ssid, chan, pw) through dbapi server to sniff.py inside halo32.   </p>
<p>Output from  <code>iw dev wlan0 scan</code> for <code>halo32</code> without password</p>
<pre><code>BSS <span class="number">04</span>:<span class="string">f0:</span><span class="number">21</span>:<span class="number">10</span>:<span class="string">c0:</span>d8(on wlan0)
<span class="label">    TSF:</span> <span class="number">234855172</span> usec (<span class="number">0</span>d, <span class="number">00</span>:<span class="number">03</span>:<span class="number">54</span>)
<span class="label">    freq:</span> <span class="number">5180</span>
    beacon <span class="string">interval:</span> <span class="number">100</span> TUs
<span class="label">    capability:</span> ESS (<span class="number">0x0001</span>)
<span class="label">    signal:</span> -<span class="number">38.00</span> dBm
    last <span class="string">seen:</span> <span class="number">1052</span> ms ago
    Information elements from Probe Response <span class="string">frame:</span>
<span class="label">    SSID:</span> testRXY40
    Supported <span class="string">rates:</span> <span class="number">6.0</span>* <span class="number">9.0</span> <span class="number">12.0</span>* <span class="number">18.0</span> <span class="number">24.0</span>* <span class="number">36.0</span> <span class="number">48.0</span> <span class="number">54.0</span> 
    DS Parameter <span class="string">set:</span> channel <span class="number">36</span>
    Extended <span class="string">capabilities:</span> <span class="number">6</span>
</code></pre><p><strong>Problems:  </strong>  </p>
<ol>
<li><p>does not have encryption - inside halo32<br> change code </p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">pw = modeData.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'password'</span>, None)</span></span></span><br></pre></td></tr></table></figure>
<p> to </p>
 <figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">pw = modeData.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'pw'</span>, None)</span></span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>One more thing that struggle me so long:  </strong><br>since you modify the sniff.py code, you might restart the sniff program to reflect the update on sniff!!  </p>
<p>What I found so far: Password lost either when packed or when received.  </p>
<p><strong>Message in queue:</strong><br>peek message in queue on the dbapi server: </p>
<pre><code>curl <span class="string">http:</span><span class="comment">//paradrop.wings.cs.wisc.edu:10330/v1/recon/peek/Test</span>
</code></pre><p>indicate that password was not packed into the JSON package.</p>
<pre><code>f<span class="number">2</span>ff<span class="number">1</span>c<span class="number">8</span>d-bec<span class="number">8</span><span class="number">-4</span>a<span class="number">08</span>-aedc-ab<span class="number">72861</span>fa<span class="number">694</span> :  <span class="number">40</span> : {<span class="string">"data"</span>:{<span class="string">"ssid"</span>:<span class="string">"test40"</span>,<span class="string">"channel"</span>:<span class="number">36</span>},<span class="string">"mode"</span>:<span class="string">"__WIFI_CREATE"</span>} <span class="comment">(1 seconds old)</span>
</code></pre><ol>
<li><p>SSID name not correct. </p>
</li>
<li><p>if no password indicate, will the AP create sucessfully.</p>
</li>
</ol>
<p>POST and GET</p>
<p>Also need to change file in <code>~/paradrop/trunk/recon/dbapi/dbapi_recon.py</code></p>
<p><strong>question</strong>: will JSON package sent <code>None</code> in string or None?<br>one <code>pw = modeData.get(&#39;pw&#39;, None)</code> will <code>pw</code> get <code>None</code> or string(None)</p>
<p>that does not matter, since code in <code>if(len(pw) &lt; 8):</code> will catch it and turn it into <code>None</code>.<br>As to answer the question: yes, the pw will remain the value <code>None</code></p>
<h2 id="Current_modified_files:"><strong>Current modified files: </strong></h2><h3 id="server_side:-1">server side:</h3><p><code>dbapi_recon.py</code> @ <code>~/paradrop/trunk/recon/dbapi/dbapi_recon.py</code> manage the format of POST.</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">def POST_wifiCreate(self, request, groupid):</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    <span class="comment"># check for format</span></span><br><span class="line">    token, ssid, chan, pw = pdutils.explode(body, <span class="string">"sessionToken"</span>, <span class="string">"ssid"</span>, <span class="string">"channel"</span>, <span class="string">"pw"</span>)</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    <span class="comment"># create wifi without password if not in correct format</span></span><br><span class="line">    <span class="keyword">if</span>(pw is not None):</span><br><span class="line">        <span class="keyword">if</span>(len(pw) &lt; <span class="number">8</span>):</span><br><span class="line">            out.err(<span class="string">"!!%s Password at least 8 characters!\n"</span> % logPrefix(ip))</span><br><span class="line">            pw = None</span><br><span class="line">    <span class="comment"># Add a message for each ap</span></span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    self.pollResponder.addMessage(ap, sniffconfig.setConfig(sniffconfig.WIFI_CREATE, ssid=s, channel=chan, pw=pw), lambda x: x)</span><br><span class="line">    <span class="keyword">...</span></span><br></pre></td></tr></table></figure>
<p><code>dbapi_tool.py</code> @ <code>/home/xuyi/paradrop/trunk/recon/dbapi_tool.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createWifi</span><span class="params">(dbh, baseUrl, token, group, ssid, chan, pw=None)</span>:</span></span><br><span class="line">    ...</span><br><span class="line">    msg[<span class="string">'pw'</span>] = pw</span><br></pre></td></tr></table></figure>
<h3 id="router_side:-1">router side:</h3><p><code>iw.py</code> @ <code>lib/internal/utils/iw.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">startHostapd</span><span class="params">(iface, ssid, channel, key=None)</span>:</span></span><br><span class="line"> ...</span><br><span class="line"> <span class="comment"># set up WPA2 encryption</span></span><br><span class="line">    <span class="keyword">if</span>(key <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>):</span><br><span class="line">        wpa=<span class="number">3</span></span><br><span class="line">        mode=<span class="string">'WPA-PSK'</span></span><br><span class="line">        wpa_pw = <span class="string">'TKIP CCMP'</span></span><br><span class="line">        rsn_pw = <span class="string">'CCMP'</span></span><br><span class="line">        opts.append(<span class="string">'wpa=%s'</span> % wpa)</span><br><span class="line">        opts.append(<span class="string">'wpa_passphrase=%s'</span> % key)</span><br><span class="line">        opts.append(<span class="string">'wpa_key_mgmt=%s'</span> % mode)</span><br><span class="line">        opts.append(<span class="string">'wpa_pairwise=%s'</span> % wpa_pw)</span><br><span class="line">        opts.append(<span class="string">'rsn_pairwise=%s'</span> % rsn_pw)</span><br></pre></td></tr></table></figure>
<p><code>sniff.py</code> @ <code>root/recon/sniff.py</code></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">def _modeCreateSSID(self, modeData, completed):</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    pw = modeData.get(<span class="string">'pw'</span>, None)</span><br><span class="line">    <span class="keyword">...</span></span><br><span class="line">    res = iw.startHostapd(<span class="string">'wlan0'</span>, ssid, chan, pw)</span><br></pre></td></tr></table></figure>
<h2 id="Commit_the_changes:"><strong>Commit the changes:</strong></h2><h3 id="push_updates_to_server:">push updates to server:</h3><p>1.Check the status of all files:</p>
<pre><code><span class="title">svn</span> status
</code></pre><p>Outputs:</p>
<pre><code>xuyi<span class="variable">@paradrop</span><span class="symbol">:~/paradrop/trunk</span><span class="variable">$ </span>svn status
?       envsetup.sh
<span class="constant">M </span>      recon/dbapi_tool.py
<span class="constant">M </span>      dbapi/dbapi_recon.py
</code></pre><p>2.commit and push: </p>
<pre><code>svn <span class="keyword">ci</span> -<span class="keyword">m</span> <span class="string">"XR: added password support to SSID startup"</span>
</code></pre><p>Outputs: </p>
<pre><code>xuyi<span class="variable">@paradrop</span><span class="symbol">:~/paradrop/trunk</span><span class="variable">$ </span>svn ci -m <span class="string">"Xuyi: added password support to SSID startup"</span>
<span class="constant">Sending </span>       trunk/dbapi/dbapi_recon.py
<span class="constant">Sending </span>       trunk/recon/dbapi_tool.py
<span class="constant">Transmitting </span>file data ..
<span class="constant">Committed </span>revision <span class="number">1585</span>.
</code></pre><h2 id="TODO:"><strong>TODO:</strong></h2><ol>
<li>Push the change from router</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/work/">work</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/paradrop/">paradrop</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/19/sniffencrption_2/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/19/sniffencrption_2/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/15/sniffencrption/" title="Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project" itemprop="url">Configure Encrption (WPA2/PSK) on Recon(sniff.py) Project</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-15T23:28:47.000Z" itemprop="datePublished"> 发表于 06-15-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Configure_Encrption_(WPA2/PSK)_on_Recon(sniff-py)">Configure Encrption (WPA2/PSK) on Recon(sniff.py)</h2><p><img src="http://7xihzu.com1.z0.glb.clouddn.com/sniffs.IMG_1793.jpg" alt="MySummerResearch" style="width:600px;"></p>
<h3 id="Useful_info:">Useful info:</h3><p><strong>connect to the paradrop server: </strong>  </p>
<pre><code>ssh pd@paradrop<span class="class">.wings</span><span class="class">.cs</span><span class="class">.wisc</span><span class="class">.edu</span>
</code></pre><p>IMPORTANT: once the paradrop system(router) hock up into the internet, it automatically VPN to the paradrop server, which parapdrop server can get access to all the haloxxx routers that are onlined.</p>
<p><strong>List all network interfaces for wireless hardware:</strong>  </p>
<pre><code><span class="title">iw</span> dev
</code></pre><p>Outputs:</p>
<pre><code><span class="tag">phy</span><span class="id">#1</span>
<span class="tag">Interface</span> <span class="tag">moni1</span>
    <span class="tag">ifindex</span> 4481
    <span class="tag">wdev</span> 0<span class="tag">x100001180</span>
    <span class="tag">addr</span> 04<span class="pseudo">:f0</span><span class="pseudo">:21</span><span class="pseudo">:10</span><span class="pseudo">:c0</span><span class="pseudo">:d8</span>
    <span class="tag">type</span> <span class="tag">monitor</span>
<span class="tag">Interface</span> <span class="tag">wlan0</span>
    <span class="tag">ifindex</span> 4439
    <span class="tag">wdev</span> 0<span class="tag">x100001156</span>
    <span class="tag">addr</span> 04<span class="pseudo">:f0</span><span class="pseudo">:21</span><span class="pseudo">:10</span><span class="pseudo">:c0</span><span class="pseudo">:d8</span>
    <span class="tag">ssid</span> <span class="tag">testRS</span>
    <span class="tag">type</span> <span class="tag">AP</span>
    <span class="tag">channel</span> 36 (5180 <span class="tag">MHz</span>), <span class="tag">width</span>: 20 <span class="tag">MHz</span> (<span class="tag">no</span> <span class="tag">HT</span>), <span class="tag">center1</span>: 5180 <span class="tag">MHz</span>
</code></pre><p><strong>Configure a network interface:</strong>  </p>
<pre><code>ifconfig
</code></pre><p><strong>Scan all the SSIDs within nearby:</strong>  </p>
<pre><code>iw <span class="built_in">dev</span> wlan0 <span class="built_in">scan</span>
</code></pre><h3 id="Connect_to_the_router:">Connect to the router:</h3><ol>
<li>SSID: ParadropXX</li>
<li>Password: paradroprocks</li>
</ol>
<h3 id="Ssh_into_the_paradrop_router:">Ssh into the paradrop router:</h3><pre><code><span class="title">ssh</span> root<span class="variable">@halo32</span>   
</code></pre><p>passowrd: 699.tmp<br>public ip: 216.26.112.63</p>
<h3 id="Create_shoot_through_front_end_page-">Create <code>shoot</code> through front end page.</h3><ol>
<li><code>ifconfig br-lan</code> </li>
<li>get <code>inet addr:</code> for example: <code>192.168.60.1</code></li>
<li>open browswer go to  <code>192.168.60.1</code></li>
<li>set up an <code>app</code> as <code>recon</code></li>
</ol>
<h3 id="Log_into_the_shoot">Log into the <code>shoot</code></h3><ul>
<li>run command line check:  <pre><code>python etc/pd/lib/internal/fc/chutestorage.py -ls </code></pre></li>
<li>output from terminal:</li>
</ul>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line">lxc:<span class="number">64</span>c22813-ab61-<span class="number">4</span>c87-<span class="number">9</span>ff6-cac4a03b690f</span><br><span class="line">  state:    running</span><br><span class="line">  <span class="keyword">struct</span>:   &#123;<span class="string">'net'</span>: &#123;<span class="string">'wan'</span>: &#123;<span class="string">'type'</span>: <span class="string">'wan'</span>, <span class="string">'intfName'</span>: <span class="string">'eth0'</span>, <span class="string">'ipaddr'</span>: <span class="string">'10.100.10.1'</span>, <span class="string">'netmask'</span>: <span class="string">'255.255.255.0'</span>&#125;, <span class="string">'passthroughInterfaces'</span>: [], <span class="string">'wlanPassthrough'</span>: <span class="string">'True'</span>, <span class="string">'radioid'</span>: <span class="number">1</span>&#125;, <span class="string">'disk'</span>: &#123;<span class="string">'size'</span>: <span class="number">123456</span>&#125;, <span class="string">'cmds'</span>: &#123;<span class="string">'firewall'</span>: &#123;<span class="string">'post'</span>: [<span class="string">'iptables -t nat -I PREROUTING -i tun0 -p tcp -m tcp --dport 6555 -j DNAT --to-destination 10.100.10.1:22'</span>, <span class="string">'iptables -I FORWARD -i tun0 -s 10.6.0.0/24 -d 10.100.10.1 -j ACCEPT'</span>, <span class="string">'iptables -I FORWARD -o tun0 -s 10.100.10.1 -d 10.6.0.0/24 -j ACCEPT'</span>]&#125;&#125;&#125;</span><br><span class="line">  runtime:  [&#123;<span class="string">'program'</span>: <span class="string">'echo'</span>, <span class="string">'name'</span>: <span class="string">'sniff args'</span>, <span class="string">'args'</span>: <span class="string">'python /root/recon/sniff.py -i moni1 -t 5 --phy phy1 &gt; /root/sniff_args'</span>&#125;, &#123;<span class="string">'program'</span>: <span class="string">'bash /root/recon/sniff_start.sh'</span>, <span class="string">'name'</span>: <span class="string">'startSniff'</span>, <span class="string">'args'</span>: <span class="string">''</span>&#125;, &#123;<span class="string">'cron'</span>: <span class="string">'*/1 * * * *'</span>, <span class="string">'program'</span>: <span class="string">'bash /root/recon/sniff_start.sh'</span>, <span class="string">'name'</span>: <span class="string">'Check sniff is running'</span>, <span class="string">'args'</span>: <span class="string">''</span>&#125;]</span><br><span class="line">  traffic:  []</span><br><span class="line">  resource: &#123;<span class="string">'lan'</span>: &#123;<span class="string">'down'</span>: <span class="number">25000</span>, <span class="string">'up'</span>: <span class="number">25000</span>&#125;, <span class="string">'cpu'</span>: <span class="string">'@resource.cpu.MAX'</span>, <span class="string">'memory'</span>: <span class="string">'@resource.memory.MAX'</span>&#125;</span><br><span class="line">  files:  [&#123;<span class="string">'path'</span>: <span class="string">'/root'</span>, <span class="string">'sha1'</span>: <span class="string">'None'</span>, <span class="string">'todo'</span>: <span class="string">'EXTRACT'</span>, <span class="string">'name'</span>: <span class="string">'sniff'</span>, <span class="string">'location'</span>: <span class="string">'@paradrop.server(sniff/sniff.tar.gz)'</span>&#125;]</span><br><span class="line">  radioid:  <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>Userful Infomation:<br><strong>UUID</strong> - 64c22813-ab61-4c87-9ff6-cac4a03b690f<br><strong>ipaddr</strong> - 10.100.10.1 &lt;- this is the address for the shoot(app) you just created. ssh into it.</p>
<pre><code><span class="title">ssh</span> root@<span class="number">10.100.10.1</span>
</code></pre><p>User/Pass: root  </p>
<h3 id="Check_if_sniff_is_still_running:">Check if sniff is still running:</h3><pre><code>screen -<span class="keyword">ls</span>
</code></pre><p>output from terminal:</p>
<pre><code>There are screens on:
    <span class="number">53</span><span class="class">.sniff</span>    (Detached)
    <span class="number">28</span><span class="class">.lxcserver</span>    (Detached)
<span class="number">2</span> Sockets <span class="keyword">in</span> /tmp/screens/S-root.
</code></pre><h3 id="Stop_stiff:">Stop stiff:</h3><pre><code>bash /root/recon/sniff_disable<span class="class">.sh</span>
bash /root/recon/sniff_kill<span class="class">.sh</span> 
</code></pre><p>check if stiff stop:</p>
<pre><code>screen -<span class="keyword">ls</span>
</code></pre><p>output from terminal:</p>
<pre><code>There is <span class="tag">a</span> screen on:
    <span class="number">28</span><span class="class">.lxcserver</span>    (Detached)
<span class="number">1</span> Socket <span class="keyword">in</span> /tmp/screens/S-root. 
</code></pre><h3 id="Restart_stiff:">Restart stiff:</h3><pre><code>bash <span class="regexp">/root/</span>recon<span class="regexp">/sniff_restart.sh</span>
</code></pre><p><code>screen -ls</code> output from terminal:</p>
<pre><code>There are screens on:
    <span class="number">782</span><span class="class">.sniff</span>   (Detached)
    <span class="number">28</span><span class="class">.lxcserver</span>    (Detached)
<span class="number">2</span> Sockets <span class="keyword">in</span> /tmp/screens/S-root.
</code></pre><h3 id="Goals:">Goals:</h3><p>now I am inside the shoot, I need to use <code>sniff</code> to run <code>hostapd</code> to create a new access point for the app, so that the SSID created should be encrypted in (WPA2/PSK).   </p>
<p><strong>BackGround Info:</strong><br><em>Recon</em>:  Recon is the project name for the retail analytics that we are doing. Our initial deployment is in the UW Bookstore on state street.</p>
<p><a href="http://wirelessathome.wings.cs.wisc.edu/redmine/projects/paradrop/wiki/Recon" target="_blank" rel="external">http://wirelessathome.wings.cs.wisc.edu/redmine/projects/paradrop/wiki/Recon</a></p>
<p><em>Sniff</em>: </p>
<h4 id="Vim_up/down/left/right_and_delete_issues:">Vim up/down/left/right and delete issues:</h4><p>vim $HOME/.vimrc, add following lines into the file:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> backspace=<span class="number">2</span> <span class="string">" make backspace work like most other apps</span><br><span class="line"></span><span class="keyword">set</span> nocompatible "must <span class="keyword">be</span> <span class="keyword">first</span> <span class="built_in">line</span></span><br></pre></td></tr></table></figure>
<p>Sample $HOME/.vimrc file:</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> nocompatible " must be the first <span class="keyword">line</span></span><br><span class="line">filetype <span class="keyword">on</span></span><br><span class="line">filetype indent <span class="keyword">on</span></span><br><span class="line">filetype <span class="keyword">plugin</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">set</span> laststatus=2</span><br><span class="line"><span class="keyword">set</span> statusline=%&lt;%f\%<span class="keyword">h</span>%<span class="keyword">m</span>%r%=%-20.(<span class="keyword">line</span>=%<span class="keyword">l</span>\ \ col=%c%V\ \ totlin=%<span class="keyword">L</span>%)\ \ \%<span class="keyword">h</span>%<span class="keyword">m</span>%r%=   %-40(bytval=0x%B,%<span class="keyword">n</span>%Y%)\%P</span><br><span class="line"><span class="keyword">set</span> ofu=syntaxcomplete#Complete</span><br><span class="line"><span class="keyword">set</span> backspace=2 " make backspace work like most other apps</span><br></pre></td></tr></table></figure>
<p><strong><code>_modeCreateSSID</code> inside  <code>trunk/recon/app/sniff.py</code></strong>  </p>
<ol>
<li>insdie the <code>_modeCreateSSID</code>, calling lots of functions inside the <code>iw</code> library to set up configuration. </li>
<li>res = iw.startHostapd(‘wlan0’, ssid, chan)</li>
</ol>
<p><strong><code>startHostapd</code> inside <code>trunk/lib/internal/utils/iw.py</code></strong>  </p>
<ol>
<li>create a <code>hostapd.conf</code> file with infomaiton from the parameters (iface, ssid, channel).    </li>
<li>start the hostAPD service that create AP with <code>hostapd.conf</code> @<code>tmp/hostapd.conf</code> configuration.</li>
</ol>
<p><strong> WPA/PSK: </strong><br>For WPA-PSK,<br>either <strong>wpa_psk</strong> or wpa_passphrase must be set and <strong>wpa_key_mgmt</strong> must include <strong>WPA-PSK</strong>. Instead of wpa_psk / wpa_passphrase, wpa_psk_radius might suffice.</p>
<p><strong>add below information: </strong><br>wpa_passphrase=parashootrocks<br>wpa_key_mgmt=WPA-PSK<br>wpa=2</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">startHostapd</span><span class="params">(iface, ssid, channel, key, mode, wpa=<span class="number">2</span>)</span>:</span>
    .....
    opts.append(<span class="string">'wpa=%s'</span> % wpa)
    opts.append(<span class="string">'wpa_passphrase=%s'</span> % key)
    opts.append(<span class="string">'wpa_key_mgmt=%s'</span> % mode)
</code></pre><p>Question to solve:<br><strong>1. encrption seems not setting up probabaly  </strong>  </p>
<pre><code>~ # hostapd -B /tmp/hostapd.conf
Configuration <span class="keyword">file</span>: /tmp/hostapd.conf
Line <span class="number">5</span>: Invalid PSK <span class="string">'paradroprocks'</span>.
<span class="number">1</span> errors found <span class="keyword">in</span> configuration <span class="keyword">file</span> <span class="string">'/tmp/hostapd.conf'</span>
Failed <span class="keyword">to</span> <span class="keyword">set</span> up <span class="keyword">interface</span> <span class="keyword">with</span> /tmp/hostapd.conf
Failed <span class="keyword">to</span> initialize <span class="keyword">interface</span>
</code></pre><ul>
<li>did not enable wpa in the first place, inside config file <code>wpa=3</code> will fix.  </li>
</ul>
<p><strong>2. how to set up wlan0 in side the shoot</strong>  </p>
<ul>
<li>correctly start up with <code>startAP.py</code> will fix.  </li>
</ul>
<p><strong>3. the <code>self._phy</code> </strong>  </p>
<ul>
<li>it is just the index for physical connection (phy1, phy0, etc)  </li>
</ul>
<p>TODO:  </p>
<ol>
<li><del>read through <code>_modeCreateSSID</code> on <code>sniff.py</code></del>  </li>
<li><del>read through <code>.config</code> file, see where encrption comes in</del>   </li>
<li><del>useful files to read: <code>trunk/recon/app/sniff.py</code>, <code>hostapd.conf</code>, and <code>trunk/lib/internal/utils/iw.py</code></del>   </li>
<li><del>write <code>startAP.py</code> file to test the <code>hostapd</code> funcion, if AP comes up without encrption first.</del>  </li>
<li><del>update <code>startAP.py</code> to make encrption enable</del>  </li>
<li>~~fix the error for <strong>hostapd v2.2</strong> ~~</li>
</ol>
<p><strong>How to configure WPA:  </strong><br>inside <code>lib/internal/utils/iw.py</code>:  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">startHostapd</span><span class="params">(iface, ssid, channel, key, mode, wpa=<span class="number">2</span>)</span>:</span></span><br><span class="line">    ..... <span class="comment"># `wpa = 2` indicates WPA2 encrption</span></span><br><span class="line">    opts.append(<span class="string">'wpa_passphrase=%s'</span> % key)</span><br><span class="line">    opts.append(<span class="string">'wpa_key_mgmt=%s'</span> % mode)</span><br></pre></td></tr></table></figure>
<p><code>startAP.py</code> </p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import <span class="tag">time</span></span><br><span class="line">from lib<span class="class">.internal</span><span class="class">.utils</span> import iw</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'Start setting AP connection: '</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">getIwDevList</span><span class="params">()</span></span></span><br><span class="line">iw.<span class="function"><span class="title">createDev</span><span class="params">(<span class="string">'phy1'</span>, <span class="string">'wlan0'</span>, <span class="string">'__ap'</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">setDevIP</span><span class="params">(<span class="string">'wlan0'</span>, <span class="string">'10.200.200.1'</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">bringUp</span><span class="params">(<span class="string">'wlan0'</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">killallDnsmasq</span><span class="params">()</span></span></span><br><span class="line">iw.<span class="function"><span class="title">startDnsmasq</span><span class="params">(<span class="string">'recon'</span>, <span class="string">'wlan0'</span>, <span class="string">'10.200.200.1'</span>, <span class="string">'10.200.200.10'</span>, <span class="string">'10.200.200.100'</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">enableNAT</span><span class="params">(<span class="string">'wlan0'</span>, <span class="string">'eth0'</span>, <span class="string">'10.200.200.1'</span>)</span></span></span><br><span class="line">iw.<span class="function"><span class="title">startHostapd</span><span class="params">(<span class="string">'wlan0'</span>, <span class="string">'testRS'</span>, <span class="string">'36'</span>, <span class="string">'paradroprocks'</span>, <span class="string">'WPA-PSK'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'Success!'</span>)</span></span></span><br><span class="line">while True:</span><br><span class="line">    <span class="tag">time</span>.<span class="function"><span class="title">sleep</span><span class="params">(<span class="number">1</span>)</span></span></span><br></pre></td></tr></table></figure>
<p><code>stopAP.py</code>:</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">import <span class="tag">time</span></span><br><span class="line">from lib<span class="class">.internal</span><span class="class">.utils</span> import iw</span><br><span class="line">from lib<span class="class">.paradrop</span> import out</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'Start Deleting AP'</span>)</span></span></span><br><span class="line">res = iw.<span class="function"><span class="title">disableNAT</span><span class="params">(<span class="string">'wlan0'</span>, <span class="string">'eth0'</span>, <span class="string">'10.200.200.1'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(res)</span></span>:</span><br><span class="line">    <span class="function"><span class="title">print</span><span class="params">(<span class="string">'err@disableNAT'</span>)</span></span></span><br><span class="line"></span><br><span class="line">res = iw.<span class="function"><span class="title">killHostapd</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(res)</span></span>:</span><br><span class="line">    out.<span class="function"><span class="title">err</span><span class="params">(<span class="string">'!! %s Unable to kill hostapd: %s\n'</span> % (logPrefix()</span></span>, <span class="function"><span class="title">str</span><span class="params">(res)</span></span>))</span><br><span class="line"></span><br><span class="line">res = iw.<span class="function"><span class="title">killallDnsmasq</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(res)</span></span>:</span><br><span class="line">    <span class="function"><span class="title">print</span><span class="params">(<span class="string">'err@killallDnsmasq'</span>)</span></span></span><br><span class="line"></span><br><span class="line">res = iw.<span class="function"><span class="title">startDefaultDnsmasq</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(res)</span></span>:</span><br><span class="line">    out.<span class="function"><span class="title">err</span><span class="params">(<span class="string">'!! %s Unable to start dnsmasq: %s\n'</span> % (logPrefix()</span></span>, <span class="function"><span class="title">str</span><span class="params">(res)</span></span>))</span><br><span class="line"></span><br><span class="line">res = iw.<span class="function"><span class="title">deleteDev</span><span class="params">(<span class="string">'wlan0'</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">if</span><span class="params">(res)</span></span>:</span><br><span class="line">    <span class="function"><span class="title">print</span><span class="params">(<span class="string">'err@deleteDev'</span>)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">'Success deleting AP'</span>)</span></span></span><br></pre></td></tr></table></figure>
<p><code>iw.getIwDevList()</code> - extract necessary value of info. (<code>ifindex</code>, <code>wdev</code>, <code>addr</code>, <code>type</code>) into <code>ret</code>, which is a return value. inside the <code>sniff.py</code> <code>iw.getiwDevList</code> simplely Check if wlan0 already exists. checking method</p>
<p><code>iw.createDev(&#39;phy1&#39;, &#39;wlan0&#39;, &#39;__ap&#39;)</code> - create <code>wlan0</code> which has a AP type</p>
<p><code>iw.setDevIP(&#39;wlan0&#39;, &#39;10.200.200.1&#39;)</code> - set up ip, mask for <code>wlan0</code></p>
<p><code>iw.bringUp(&#39;wlan0&#39;)</code> -  use <code>ifconfig</code> to bring up <code>wlan0</code></p>
<p><code>iw.killallDnsmasq()</code> - reset DNS </p>
<p><code>iw.startDnsmasq(&#39;recon&#39;, &#39;wlan0&#39;, &#39;10.200.200.1&#39;, &#39;10.200.200.10&#39;, &#39;10.200.200.100&#39;)</code> - set up dns with parameter</p>
<p><code>iw.enableNAT(&#39;wlan0&#39;, &#39;eth0&#39;, &#39;10.200.200.1&#39;)</code> - setup NAT</p>
<p><strong>Issues for hostapd v2.2:  </strong>  </p>
<pre><code>Configuration <span class="keyword">file</span>: /tmp/hostapd.conf
nl80211: Could <span class="keyword">not</span> configure driver mode
nl80211 driver <span class="keyword">initialization</span> failed.
</code></pre><p>Just fixed: SSID can not start probably because I did not destroy the <code>wlan0</code> probably, now use scripts <code>stopAP.py</code>.<br>it works pefect. (inside <code>sniff.py</code> file, method <code>_modeDestroySSID</code> does the same thing.)</p>
<p><strong>Final review on steps to set encrption on sniff</strong>  </p>
<ol>
<li>inside <code>sniff.py</code>, modify the line for <code>iw.startHostapd</code> to specific key to add:</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">&lt;pre&gt;&lt;code&gt;iw.<span class="function"><span class="title">startHostapd</span><span class="params">(<span class="string">'wlan0'</span>, <span class="string">'testRS'</span>, <span class="string">'36'</span>, <span class="string">'paradroprocks'</span>)</span></span>&lt;/code&gt;&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>inside <code>iw.py</code>, modeify the indterface for <code>startHostapd</code> to enable WPA2 encryption.</li>
</ol>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line">&lt;pre&gt;&lt;code&gt;</span><br><span class="line">def startHostapd(iface, ssid, channel, <span class="variable">key</span>, wpa=<span class="number">3</span>, mode=<span class="string">'WPA-PSK'</span>):</span><br><span class="line">    ....</span><br><span class="line">    </span><br><span class="line">    # <span class="built_in">set</span> up WPA2 encryption</span><br><span class="line">    wpa_pw = <span class="string">'TKIP CCMP'</span></span><br><span class="line">    rsn_pw = <span class="string">'CCMP'</span></span><br><span class="line">    opts.<span class="built_in">append</span>(<span class="string">'wpa=%s'</span> % wpa)</span><br><span class="line">    opts.<span class="built_in">append</span>(<span class="string">'wpa_passphrase=%s'</span> % <span class="variable">key</span>)</span><br><span class="line">    opts.<span class="built_in">append</span>(<span class="string">'wpa_key_mgmt=%s'</span> % mode)</span><br><span class="line">    opts.<span class="built_in">append</span>(<span class="string">'wpa_pairwise=%s'</span> % wpa_pw)</span><br><span class="line">    opts.<span class="built_in">append</span>(<span class="string">'rsn_pairwise=%s'</span> % rsn_pw)</span><br><span class="line">&lt;/code&gt;&lt;/pre&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>test files: <code>startAP.py</code> and <code>stopAP.py</code></li>
</ol>
<p>P.S. All of these babes are going to install in Union South next week!!</p>
<p><img src="http://7xihzu.com1.z0.glb.clouddn.com/sniffs.IMG_1832.JPG" alt="MySummerResearch" style="width:600px;"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/work/">work</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/paradrop/">paradrop</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/15/sniffencrption/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/15/sniffencrption/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/endOfJunior/" title="回首大三下" itemprop="url">回首大三下</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-06-09T01:22:33.000Z" itemprop="datePublished"> 发表于 06-08-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>大三上学期收获不小，GPA成功破3.7。数了数钱包，短短4个月申请了接近10张的信用卡💳。这两天刚刚接到suman教授的回信，邀请我加入他的团队，summer research也有了着落～我的小美女还有1个月就要来美国读研了。感觉一切都慢慢街上了正轨。今年暑假上一门EPD397(学术写作课)，外加另外一门网课(音乐理论课)。大四两个学期每学期只需要14个学分就可以双学位顺利毕业。</p>
<p>大三下学期让我明白了什么是学习,我总结出自己人生的公式:<br><strong>喜欢,热爱的事情＋学习时心无旁念＝生活</strong>。</p>
<p>不仅学习的效率也明显提升了，常旅客的学识方面慢慢跟上了前辈们的脚步。主流的信用卡，酒店，航空金卡积分都有了大概的了解，自己的视野一下子宽了许多。老爸经常爱说的一句话：“花小钱办大事” 感觉跟常旅客的精髓有一定的相似度。在跟前辈／同辈们的学期过程中懂得了常旅客的精神: 出门旅游，要自己玩的开心，住得开心，吃的开心，常旅客的精神就是最大利润回报，这里强调的是回报。我选择你们酒店，就是我看得起你，为了感谢我对你的忠诚，对于这些忠诚的客户，你们用免费住宿来回报我。</p>
<h2 id="常旅客：">常旅客：</h2><p>熟悉和了解酒店／航空业的游戏规则，会让你的出行更加的舒适，方便。这几天知乎上讨论旅游出行怎么样才能最开心。一位朋友提到 💰钱💰 不应该放在旅行计划考虑的第一位，穷游会直接影响旅游的质量，和心情。他举例到，有时候因为想省钱，结果住到了很偏远的地方，交通去主要的景点的路费不说，来回就浪费了半天时间。虽然景点的附近酒店相对会更贵些，但是花多点钱，但是省下的是更多游览玩耍的时间。</p>
<p>针对这个观点，我部分同意，因为穷游，少花钱，并不代表旅途的质量和欢乐会因此大打折扣。虽说时间就是金钱，金钱可能买给你方便，但是金钱不一定能给你买来快乐。2015年寒假，我和小女友去了趟海口。两个人都是学生，虽然父母也给了足够的资金，可是我和小女友都选择了穷游(现在回想起来，有点委屈小美女了～). 整趟下来人均包机票6天下来2000出头。现在回想起来，其实我家小美女很早就懂得了常旅客的精髓，花小钱办大事。第一天入住了一个中端酒店，一晚300多，300多在三亚来说已经是比较实惠的价格。当晚小美女打开团购发现附近的酒店有90多一晚的，一开始还不太敢相信，后来看了下还挺靠谱的，决定第二天去试一试。然后之后的5天都在那个酒店入住。再举一个例子，去海口少不了潜水，这也是我们两个的第一次潜水。在三亚潜水，通过正常渠道，没有个300-500你就别想玩。结果小美女团购上找到了个酒店来回接送+烧烤+潜水＝89人民币。当时也不敢相信自己的眼睛，其实我现在也还不敢回想，我们是怎么办到的。所以说并不是说穷游就会影响出行的质量，这两者之间的关系是非常微妙的。只要你有心，多找找，多看看，多比一比，出门旅行，很多费用其实是可以省下来的。那些费用没法避免费用，针对不同类型消费，使用不同的信用卡消费，使得积分最大利益化，使得旅游出行正回报，是旅行变成一种期待而不是一种负担。</p>
<h2 id="学业：">学业：</h2><p>大三下也是够惊险的，一共5门课，14个学分，由于ECE340(电路设计)这门课第一次midterm考的太糟，最后勉强拿了个AB，也是这学期唯一的AB。虽然有些遗憾，错过了单学期GPA4.0的机会。不过也给我留下了发展的空间，争取大四下学期努力GPA4.0，给自己的大学生涯拼一把。CS540(人工智能)这门课老师是个人工智能的博士生，讲课非常有趣，并且对学生不离不弃。有几次project遇到bug抓破头脑也无法继续的时候，他总是很乐意伸出援手，牺牲自己的额外时间帮我们这群小屁孩debug，真心好老师，小哥名字叫做Scott Alfeld，真心给个好评👍 上学期GPA3.68这学期尤其重要，经过一番努力，GPA终于涨到了3.71，看到自己的GPA从3.6飞到3.7的那一刻，真的超级开心！后面两个学期好好珍惜学习的机会，真正会学习的人，学习的时候心无旁念，玩耍的时候激情的玩耍，劳逸结合，课上学习的内容课上就搞懂，课后及时巩固复习。想到初中数学老师的口头禅：打破沙锅问到底！现在回想起来还是非常有道理的。这几天作业比较多，爸爸刚好过来玩耍，那一天我3点睡觉，5点起床继续写作业，直到上课前的一个小时，我终于把作业写完，送了一口气。爸爸看到我学的这么辛苦，他心里好不是滋味，平时很少流露自己心里情感的父亲👨情不自禁的感慨道:“儿子，学习好辛苦u”。可是我想说：爸爸这点苦不算什么，学习过程虽然艰苦，但是学到东西都是自己的，我很开心！希望你不要为我担心，您辛辛苦苦一点点积攒起来的小金库，全都给了我，提供给我最棒的教育机会，我不会让你失望。当然学习的期间难免也会有遇到困难想自暴自弃的时候，非常感谢我的小美女👩，不依不饶的陪在我的身边，鼓励我，给我力量，谢谢你时不时寄来的大礼包(里面都是最爱的好吃的零食😋)在这里特别感谢小猪猪💏，我是你幸福的小帅哥👦。</p>
<h2 id="信用卡／常旅客：">信用卡／常旅客：</h2><p>简单总结下这四个月来的战果(废话不多说，先上图):<br><img src="http://7xihzu.com1.z0.glb.clouddn.com/cards.jpg" alt="4个月的猎物" style="width:600px;"></p>
<p><strong>航空✈️积分:</strong><br>United 90,548<br>AA 53,392</p>
<p><strong>信用卡💳积分:</strong><br>MR(AMEX):53,911<br>UR(CHASE):14,301</p>
<p><strong>酒店🏨积分：</strong><br>HHonor: 64,768</p>
<p><strong>酒店航空会员: </strong><br>UA金，希尔顿金，AB金，万豪金，BestWestern钻，Herz金。</p>
<h2 id="暑假目标：">暑假目标：</h2><ol>
<li>不许偷懒，每天坚持🏃 是个👦 就剪掉小肚肚</li>
<li>完成 <strong> [Head First Java]</strong> <img src="http://7xihzu.com1.z0.glb.clouddn.com/books.headFirstJava.png" alt="Head First Java" style="width:600px;"></li>
<li>完成 <strong> [Effective Java]</strong>   <img src="http://7xihzu.com1.z0.glb.clouddn.com/books.EffectJava.png" alt="Effective Java" style="width:600px;"></li>
<li>每天早晚GRE 单词(200个) 各一小时 偷懒不背就是小狗🐶</li>
<li>Python 爬虫project  </li>
</ol>
<p>先想到这么多～ 想到重要的继续补充。</p>
<h2 id="大四课程安排：">大四课程安排：</h2><p>To be continue……</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/生活/">生活</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/杂文/">杂文</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/endOfJunior/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/endOfJunior/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/12/talk_about_life/" title="浅谈人生 (Talk about life)" itemprop="url">浅谈人生 (Talk about life)</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-04-13T03:48:56.000Z" itemprop="datePublished"> 发表于 04-12-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="浅谈人生_(Talk_about_life)"><strong>浅谈人生 (Talk about life)</strong></h1><p><img src="http://7xihzu.com1.z0.glb.clouddn.com/badger.jpg" alt="摄于海南三亚" style="width: 600px;"></p>
<p>大半夜的你还不睡觉你在干什么！哈哈哈。难得今天这么有精神，外面下着小雨，还伴着电闪雷鸣，麦迪逊的冬天开始悄悄的离去。</p>
<h3 id="大学已经过了三年："><strong>大学已经过了三年：</strong></h3><p>对了，你还没说你这么晚在干什么！说起来也惭愧，大学三年了，完全没有仔细想过当初为什么自己选择了计算机工程(Computer Engineering)，虽然父母督促我工程太累了，选个别的吧。我毅然坚定的选择了计算机工程(当时的我一度以为计算机工程就是帮别人修修电脑🙈)。大二的时候，听说计算机工程的学生只要多修两门课就能拿到计算机科学(Computer Science)的双学位，我一开始还不太相信，后来一看真是这么简单。也没多想，感觉双学位毕业🎓，毕业工作也稳稳的了。</p>
<p>现在回想起来，当时真的是not too young, but still too naive!由于工程的课程难度本身就不简单，现在又要加上CS的课程，简直就是像大锅饭一样，左右不可兼得。虽然GPA保持的还算凑活，可是我学的很不开心呀！完全没有一点方向感，感觉每天就是活在渊源不断作业的里，美味的QQ吃的都不开心了。</p>
<h3 id="招聘会："><strong>招聘会：</strong></h3><p>大三这年去了大大小小的招聘会，虽然自己的简历并说不上太优秀，可是至少我的Resume的各方面(GPA, Course projects)还是拿的出手的，再说了，哥怎么也是准备本科双学位的人(🐶)。公司没理由在第一轮刷掉我吧。跟我想的一样，大家(什么Amazon, Microsoft呀)都觉得我挺不错的，开始联系我，进行技术面试。我是条双学位的狗，interviewer看我挺阳光开朗的，小伙子不错，来，给你出个简单的reverse linked list的题。结果我还是再三的提示下才勉强写了出来。</p>
<p>这样下去可真不是办法，难道大学四年真的要白忙活了？大三结束了连一个internship都捞不到，还想怎么在美利坚大国混下去！我必须在工程和CS两边做个抉择。</p>
<h3 id="无法抉择："><strong>无法抉择：</strong></h3><p>今天晚上是历史性的一刻。一直无法割舍自己白学了三年Engineering课程的假象，觉得如果就这么放弃了Engineering, 好不甘心！google Computer Science然后又跟Computer Engineering 有关的方向。然后走火入魔的找到了Computer Architecture. 发现UW-Madison 住着好几只Architecture世界级的大神级人物(David Wood, Mark Hill, etc)，然后又开始新一轮疯狂的google有关Architecture的资料，还专门建了个文件夹，放了好多资料，准备最后一年大干一场。(Naive!)</p>
<p>看看表，两点了，虽然还是没有最后定下人生的目标，赶紧刷牙洗洗睡了。可这事没定下来，内心不安啊。虽然computer architecture可以说是CS和CE的结合区域。可是我真的喜欢吗？我真的擅长这方面的细节的研究吗？就当我全神贯注地在思考计算机有关领域我到底应该往哪走的一瞬间，宝贝女友走进了我的脑海里，给我指明了人生的方向。我定下了人生的第一个勇敢的目标：软件。</p>
<h3 id="爱情的力量："><strong>爱情的力量：</strong></h3><p>女友是做教育方面的，这一刻看起来，她变成了我人生的导师。放弃硬件的路，勇敢的选择软件／网页方向，是有原因的。首先我觉得自己还是更喜欢接触新鲜的事物，更享受完成一个小型项目/程序的那种喜悦感。另外如果我选择硬件，感觉以后和女友的connect就越来越少。相反如果我选择软件方面作为职业目标，可以把自己大学学过的cs有关的内容真正用到，跟自己人生的另一半的结合。女友一直有很多很棒的点子💡，她提供灵感，我用技术帮她实现，一下子人生好像充起了满满的希望。</p>
<p>当然，Engineering 的课程还是要好好的上的，CS选课的时候就更明白这门课对自己的理想／目标会有多少的支持。时间分配上，要对自己的理想和目标上分配更多的时间。人生一世，既然没办法做好所有的事情，那就想办法努力完成一个目标。</p>
<h3 id="2015年4月9日凌晨2点35-_定下人生目标："><strong>2015年4月9日凌晨2点35. 定下人生目标：</strong></h3><p><img src="http://7xihzu.com1.z0.glb.clouddn.com/plan.jpg" alt="myPlan" style="width: 600px;"></p>
<h3 id="后面的路，不会一帆风顺，但我并不害怕，因为有了目标，有了你，我就知道该往哪走，我们的船还能继续前行。">后面的路，不会一帆风顺，但我并不害怕，因为有了目标，有了你，我就知道该往哪走，我们的船还能继续前行。</h3><p>P.S. 明天ResSprot Webmaster面试,展现不一样的你。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/生活/">生活</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/杂文/">杂文</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/12/talk_about_life/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/12/talk_about_life/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand photo" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/12/photoPost/" title="美丽的小丸子" itemprop="url">美丽的小丸子</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-04-13T03:48:56.000Z" itemprop="datePublished"> 发表于 04-12-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/图片/">图片</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/12/photoPost/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/12/photoPost/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/12/hello-world/" title="Hello World" itemprop="url">Hello World</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://www.xuyiruan.com/about" title="阮先生" target="_blank" itemprop="author">阮先生</a>
		
  <p class="article-time">
    <time datetime="2015-04-13T03:48:56.000Z" itemprop="datePublished"> 发表于 04-12-2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/12/hello-world/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/12/hello-world/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/work/" title="work">work<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/生活/" title="生活">生活<sup>2</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/paradrop/" title="paradrop">paradrop<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/杂文/" title="杂文">杂文<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/图片/" title="图片">图片<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://suncuss.me" target="_blank" title="孙老板&#39;s Blog">孙老板&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 写代码, 学知识, 为了和你一起活着 <br/>
			尝美食, 游世界, 为了给你更好的生活</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> © 2015 
		
		<a href="http://www.xuyiruan.com/about" target="_blank" title="阮先生">阮先生</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"xruan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-61663668-1', 'www.xuyiruan.com');  
ga('send', 'pageview');
</script>






<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  </body>
 </html>
